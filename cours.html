<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.2">
<title>Programmation en C</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:initial}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px 0}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:.4em .75em 0 .75em;line-height:1;vertical-align:top}
.colist>table tr>td:first-of-type img{max-width:initial}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
</head>
<body class="book">
<div id="header">
</div>
<div id="content">
<link rel="stylesheet" href="pygments-default.css">
<h1 id="_programmation_en_c" class="sect0">Programmation en C</h1>
<div class="paragraph">
<p><strong>Alexandre Grison</strong></p>
</div>
<div class="paragraph">
<p>Ceci est un cours de programmation axé sur le langage <strong>C</strong>.</p>
</div>
<div class="sect1">
<h2 id="_introduction">1. Introduction</h2>
<div class="sectionbody">
<div id="wikipedia" class="quoteblock">
<blockquote>
<div class="paragraph">
<p>C est un langage de programmation impératif et généraliste. Inventé au début des années 1970 pour réécrire UNIX, C est devenu un des langages les plus utilisés. De nombreux langages plus modernes comme C++, C#, Java et PHP reprennent des aspects de C.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; Wikipedia
</div>
</div>
<div class="paragraph">
<p>Le langage C est un langage compilé et de bas niveau, c&#8217;est à dire qu&#8217;on peut traduire son code en instructions directement comprises par un ordinateur (à l&#8217;opposé des <strong>langages interprétés</strong>), et qu&#8217;il laisse libre accès à la <strong>gestion de la mémoire</strong> de l&#8217;ordinateur, là où d&#8217;autres langages de programmation s&#8217;en occupent pour le développeur (exemple: Python).</p>
</div>
<div class="paragraph">
<p>C&#8217;est un langage très utilisé dans divers domaines de l&#8217;industrie informatique, en réalité on en trouve partout.</p>
</div>
<div class="ulist">
<div class="title">Par exemple:</div>
<ul>
<li>
<p>systèmes d&#8217;exploitation</p>
</li>
<li>
<p>navigateurs web</p>
</li>
<li>
<p>éditeurs de textes</p>
</li>
<li>
<p>jeux vidéos</p>
</li>
<li>
<p>informatique embarquée: satelittes, automobile, &#8230;&#8203;</p>
</li>
<li>
<p>etc.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_hello_world">2. Hello, World!</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-kt">char</span> <span class="tok-o">**</span><span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Hello, world!</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">);</span>
    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ecosystème_et_outils">3. Ecosystème et Outils</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_versions">3.1. Versions</h3>
<div class="paragraph">
<p>Il existe plusieurs versions du langage C:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>K&amp;R C: pour Kernighan et Ritchie</p>
</li>
<li>
<p>ANSI C / ISO C</p>
</li>
<li>
<p>C99: introduit en 1999</p>
</li>
<li>
<p>C11: publié en 2011</p>
</li>
<li>
<p>Embedded C: qui contient des extensions non standard pour le monde embarqué (fixed point arithmetic, specific I/O operations)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_compilateur">3.2. Compilateur</h3>
<div class="paragraph">
<p>On trouve plusieurs compilateurs pour le langage C:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>gcc</strong></p>
</li>
<li>
<p><strong>Clang</strong></p>
</li>
<li>
<p><strong>Tiny C Compiler</strong>: Créé par <a href="https://fr.wikipedia.org/wiki/Fabrice_Bellard">Fabrice Bellard</a>, un ingénieur Français (génie auteur de <strong>LZEXE</strong>, <strong>FFmpeg</strong>, <strong>QEMU</strong>, <strong>BPG image format</strong>, &#8230;&#8203;)</p>
</li>
<li>
<p>**g**: Puisque le C est un sous-ensemble du C, un compilateur C++ est parfaitement capable de compiler du C.</p>
</li>
<li>
<p><strong>Borland C++</strong></p>
</li>
<li>
<p><strong>Intel C++</strong></p>
</li>
<li>
<p><strong>Visual C++</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Dans ce cours nous utiliserons <strong>gcc</strong> (ou peut-être <strong>mingw</strong> sur Windows)</p>
</div>
<div class="paragraph">
<p>En réalité <strong>gcc</strong> est un <strong>driver</strong>, c&#8217;est à dire qu&#8217;il va lancer un pré-processeur nommé <strong>cc1</strong> pour le langage C et <strong>cc1plus</strong> pour C++), puis il lancera le linker <strong>ld</strong> (voir plus bas).</p>
</div>
<div class="paragraph">
<p><strong>Clang</strong> fait de même, sur mon Mac <strong>gcc</strong> appelle même <strong>Apple LLVM</strong> (<strong>clang</strong>) qui lance à son tour <strong>cc1</strong> et <strong>ld</strong> ;-)</p>
</div>
</div>
<div class="sect2">
<h3 id="_linker">3.3. Linker</h3>
<div class="paragraph">
<p>Le compilateur produit pour chaque fichier source <code>.c</code> un fichier objet <code>.o</code>. Le linker a pour role d&#8217;assembler ces fichiers objets ainsi que les différentes bibliothèques que vous utilisez (par exemple <code>readline</code>) en un fichier exécutable.</p>
</div>
<div class="paragraph">
<p>Le linker le plus souvent rencontré est <code>ld</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_débogueurs">3.4. Débogueurs</h3>
<div class="paragraph">
<p>Un programme C peut être compilé avec support de debug, afin de pouvoir stopper son exécution et analyser l&#8217;état du programme pour vérifier son fonctionnement</p>
</div>
<div class="paragraph">
<p>On trouve <strong>gdb</strong> qui permet d&#8217;effectuer ces tâches. De plus, vous trouverez également un programme nommé <strong>Valgrind</strong> qui permet d&#8217;effectuer du profilage de code et de vous aider à trouver d&#8217;éventuelles fuites mémoires.</p>
</div>
</div>
<div class="sect2">
<h3 id="_editeurs_de_code_ide">3.5. Editeurs de code / IDE</h3>
<div class="paragraph">
<p>Il existe des centaines de programmes qui vous permettront d&#8217;éditer votre code source C.</p>
</div>
<div class="paragraph">
<p>On les sépares en deux catégories:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Editeurs</p>
<div class="ulist">
<ul>
<li>
<p>Vim ❣️</p>
</li>
<li>
<p>Emacs</p>
</li>
<li>
<p>Nano</p>
</li>
<li>
<p>VS Code</p>
</li>
<li>
<p>Atom</p>
</li>
<li>
<p>Notepad++</p>
</li>
<li>
<p>&#8230;&#8203;</p>
</li>
</ul>
</div>
</li>
<li>
<p>IDE</p>
<div class="ulist">
<ul>
<li>
<p>Visual Studio</p>
</li>
<li>
<p>CLion</p>
</li>
<li>
<p>CodeBlocks</p>
</li>
<li>
<p>&#8230;&#8203;</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>N&#8217;importe quel éditeur fera l&#8217;affaire, mais il est évident qu&#8217;avoir un support de la coloration syntaxique, de l&#8217;auto-complétion, surlignage des erreurs est un vrai plus pour éviter les erreurs les plus communes.</p>
</div>
</div>
<div class="sect2">
<h3 id="_bonnes_pratiques">3.6. Bonnes pratiques</h3>
<div class="paragraph">
<p>Voici un ensemble de bonnes pratiques qu&#8217;il est bon d&#8217;essayer de respecter, il n&#8217;est parfois pas possible de le faire, mais essayer c&#8217;est déjà l&#8217;essentiel.</p>
</div>
<div class="paragraph">
<p>Vous les trouverez sur cette
<a href="https://github.com/mcinglis/c-style">page Github</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_types_variables">4. Types &amp; Variables</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_types">4.1. Types</h3>
<div class="paragraph">
<p>Le langage C possède de nombreux types différents, parmi lesquels nombres entiers, nombres décimaux, charactères, structures, etc.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. Exemple de tailles des différents types:</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Taille</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">char</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 à 255</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">signed char</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-128 à 127</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unsigned char</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 à 255</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">short / signed short</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-32 768 à 32 767</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-2 147 483 647 à 2 147 483 647</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-9 223 372 036 854 775 808 à 9 223 372 036 854 775 807</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Listing 1. On peut trouver les limites des types dans &lt;limits.h&gt;</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;limits.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">()</span>
<span class="tok-p">{</span>
   <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;signed char = %d à %d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">SCHAR_MIN</span><span class="tok-p">,</span> <span class="tok-n">SCHAR_MAX</span><span class="tok-p">);</span>
   <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;unsigned char = %d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">UCHAR_MAX</span><span class="tok-p">);</span>
   <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;short = %d à %d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">SHRT_MIN</span><span class="tok-p">,</span> <span class="tok-n">SHRT_MAX</span><span class="tok-p">);</span>
   <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;int = %d à %d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">INT_MIN</span><span class="tok-p">,</span> <span class="tok-n">INT_MAX</span><span class="tok-p">);</span>
   <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;long = %ld à %ld</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">LONG_MIN</span><span class="tok-p">,</span> <span class="tok-n">LONG_MAX</span><span class="tok-p">);</span>

   <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_variables">4.2. Variables</h3>
<div class="paragraph">
<p>Le langage C permet de déclarer des variables avec le format suivant: <code>type nom;</code> ou <code>type nom = valeur;</code> pour initialiser la variable avec une valeur initiale.</p>
</div>
<div class="listingblock">
<div class="title">Listing 2. Par exemple:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-c1">// pas d&#39;initialisation</span>
<span class="tok-kt">int</span> <span class="tok-n">nombre1</span><span class="tok-p">;</span>
<span class="tok-c1">// avec initialisation</span>
<span class="tok-kt">int</span> <span class="tok-n">nombre2</span> <span class="tok-o">=</span> <span class="tok-mi">2</span><span class="tok-p">;</span>
<span class="tok-c1">// plusieurs déclarations</span>
<span class="tok-kt">int</span> <span class="tok-n">nombre3</span> <span class="tok-o">=</span> <span class="tok-mi">3</span><span class="tok-p">,</span> <span class="tok-n">nombre4</span> <span class="tok-o">=</span> <span class="tok-mi">4</span><span class="tok-p">;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_structures_de_contrôle">5. Structures de contrôle</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_if_else">5.1. If/Else</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">condition</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-c1">// code à exécuter si la condition est vraie.</span>
<span class="tok-p">}</span>
<span class="tok-k">else</span>
<span class="tok-p">{</span>
    <span class="tok-c1">// code à exécuter sir la condition n&#39;est pas vraie.</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_boucles">5.2. Boucles</h3>
<div class="sect3">
<h4 id="_for">5.2.1. For</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-cm">/* initialisations */</span><span class="tok-p">;</span> <span class="tok-cm">/* condition */</span><span class="tok-p">;</span> <span class="tok-cm">/* executé après chaque tour de boucle */</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-c1">// code à exécuter à chaque tour de boucle</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Par exemple pour imprimer 5 fois <code>Hello</code> à l&#8217;écran, on initialise une variable nommée <code>i</code> à 0, on demande de boucler tant que la variable <code>i</code> a une valeur inférieure à <code>5</code>, et on indique qu&#8217;après chaque tour de boucle, la variable <code>i</code> soit incrémentée de <code>1</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <span class="tok-n">i</span> <span class="tok-o">&lt;</span> <span class="tok-mi">5</span><span class="tok-p">;</span> <span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-n">i</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Hello</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">);</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_while_do_while">5.2.2. While / Do While</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-k">while</span> <span class="tok-p">(</span><span class="tok-cm">/* condition */</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-c1">// code à exécuter tant que la condition est vraie.</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-k">do</span> <span class="tok-p">{</span>
    <span class="tok-c1">// code à exécuter au moins une fois, puis tant que la condition est vraie.</span>
<span class="tok-p">}</span>
<span class="tok-k">while</span> <span class="tok-p">(</span><span class="tok-cm">/* condition */</span><span class="tok-p">);</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_arrêts_et_continuation_de_boucles">5.3. Arrêts et continuation de boucles</h3>
<div class="sect3">
<h4 id="_arrêts">5.3.1. Arrêts</h4>
<div class="paragraph">
<p>Il est possible d&#8217;arrêter une boucle avec le mot clé <code>break</code>.</p>
</div>
<div class="paragraph">
<p>Par exemple ce programme permet de demander à un utilisateur indéfiniment son prénom jusqu&#8217;à ce que celui-ci fasse au minimum plus de 3 caractères.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdlib.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;string.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;readline/readline.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-kt">char</span> <span class="tok-o">**</span><span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-n">name</span> <span class="tok-o">=</span> <span class="tok-nb">NULL</span><span class="tok-p">;</span>
    <span class="tok-k">for</span> <span class="tok-p">(;;)</span>
    <span class="tok-p">{</span>
        <span class="tok-n">name</span> <span class="tok-o">=</span> <span class="tok-n">readline</span><span class="tok-p">(</span><span class="tok-s">&quot;Prénom: &quot;</span><span class="tok-p">);</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">strlen</span><span class="tok-p">(</span><span class="tok-n">name</span><span class="tok-p">)</span> <span class="tok-o">&gt;=</span> <span class="tok-mi">3</span><span class="tok-p">)</span>
        <span class="tok-p">{</span>
            <span class="tok-k">break</span><span class="tok-p">;</span>
        <span class="tok-p">}</span>
        <span class="tok-n">free</span><span class="tok-p">(</span><span class="tok-n">name</span><span class="tok-p">);</span>
    <span class="tok-p">}</span>

    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Merci %s!</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">name</span><span class="tok-p">);</span>
    <span class="tok-n">free</span><span class="tok-p">(</span><span class="tok-n">name</span><span class="tok-p">);</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>C&#8217;est une alternative au programme suivant:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdlib.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;string.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;readline/readline.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-kt">char</span> <span class="tok-o">**</span><span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-n">name</span> <span class="tok-o">=</span> <span class="tok-nb">NULL</span><span class="tok-p">;</span>
    <span class="tok-k">do</span>
    <span class="tok-p">{</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">name</span> <span class="tok-o">!=</span> <span class="tok-nb">NULL</span><span class="tok-p">)</span>
        <span class="tok-p">{</span>
            <span class="tok-n">free</span><span class="tok-p">(</span><span class="tok-n">name</span><span class="tok-p">);</span>
        <span class="tok-p">}</span>

        <span class="tok-n">name</span> <span class="tok-o">=</span> <span class="tok-n">readline</span><span class="tok-p">(</span><span class="tok-s">&quot;Prénom: &quot;</span><span class="tok-p">);</span>
    <span class="tok-p">}</span> <span class="tok-k">while</span> <span class="tok-p">(</span><span class="tok-n">strlen</span><span class="tok-p">(</span><span class="tok-n">name</span><span class="tok-p">)</span> <span class="tok-o">&lt;</span> <span class="tok-mi">3</span><span class="tok-p">);</span>

    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Merci %s!</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">name</span><span class="tok-p">);</span>
    <span class="tok-n">free</span><span class="tok-p">(</span><span class="tok-n">name</span><span class="tok-p">);</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>L&#8217;avantage du mot clé <code>break</code> est de pouvoir interrompre une boucle avant qu&#8217;elle se termine.</p>
</div>
<div class="paragraph">
<p>Considérons le programme suivant:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;string.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdbool.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-kt">char</span> <span class="tok-o">**</span><span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-k">const</span> <span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-n">str</span> <span class="tok-o">=</span> <span class="tok-s">&quot;Bonjour&quot;</span><span class="tok-p">;</span>
    <span class="tok-kt">bool</span> <span class="tok-n">found</span> <span class="tok-o">=</span> <span class="tok-nb">false</span><span class="tok-p">;</span>
    <span class="tok-kt">int</span> <span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-kt">int</span> <span class="tok-n">size</span> <span class="tok-o">=</span> <span class="tok-n">strlen</span><span class="tok-p">(</span><span class="tok-n">str</span><span class="tok-p">);</span>
    <span class="tok-k">for</span> <span class="tok-p">(;</span> <span class="tok-n">i</span> <span class="tok-o">&lt;</span> <span class="tok-n">size</span><span class="tok-p">;</span> <span class="tok-n">i</span><span class="tok-o">++</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">str</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;j&#39;</span><span class="tok-p">)</span>
        <span class="tok-p">{</span>
            <span class="tok-n">found</span> <span class="tok-o">=</span> <span class="tok-nb">true</span><span class="tok-p">;</span>
        <span class="tok-p">}</span>
    <span class="tok-p">}</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Le texte contient la lettre &#39;j&#39; ? %s; i vaut: %d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span>
           <span class="tok-p">(</span><span class="tok-n">found</span> <span class="tok-o">?</span> <span class="tok-s">&quot;oui&quot;</span> <span class="tok-o">:</span> <span class="tok-s">&quot;non&quot;</span><span class="tok-p">),</span> <span class="tok-n">i</span><span class="tok-p">);</span>

    <span class="tok-n">found</span> <span class="tok-o">=</span> <span class="tok-nb">false</span><span class="tok-p">;</span>
    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <span class="tok-n">i</span> <span class="tok-o">&lt;</span> <span class="tok-n">size</span><span class="tok-p">;</span> <span class="tok-n">i</span><span class="tok-o">++</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">str</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;j&#39;</span><span class="tok-p">)</span>
        <span class="tok-p">{</span>
            <span class="tok-n">found</span> <span class="tok-o">=</span> <span class="tok-nb">true</span><span class="tok-p">;</span>
            <span class="tok-k">break</span><span class="tok-p">;</span>
        <span class="tok-p">}</span>
    <span class="tok-p">}</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Le texte contient la lettre &#39;j&#39; ? %s; i vaut: %d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span>
           <span class="tok-p">(</span><span class="tok-n">found</span> <span class="tok-o">?</span> <span class="tok-s">&quot;oui&quot;</span> <span class="tok-o">:</span> <span class="tok-s">&quot;non&quot;</span><span class="tok-p">),</span> <span class="tok-n">i</span><span class="tok-p">);</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>L&#8217;exécution donne le résultat suivant:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code>Le texte contient la lettre 'j' ? oui; i vaut: 7
Le texte contient la lettre 'j' ? oui; i vaut: 3</code></pre>
</div>
</div>
<div class="paragraph">
<p>On voit que le fait d&#8217;utiliser le mot clé <code>break</code> a permis d&#8217;intérrompre la boucle et d&#8217;éviter 4 itérations à celle-ci.</p>
</div>
<div class="paragraph">
<p>Imaginez si la chaine de caractère avait une taille bien plus conséquente, par exemple 1 million de caractères?</p>
</div>
</div>
<div class="sect3">
<h4 id="_continuations">5.3.2. Continuations</h4>
<div class="paragraph">
<p>Il est également possible d&#8217;ignorer un tour de boucle et de passer directement à la prochaine à l&#8217;aide du mot clé <code>continue</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-kt">char</span> <span class="tok-o">**</span><span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <span class="tok-n">i</span> <span class="tok-o">&lt;=</span> <span class="tok-mi">5</span><span class="tok-p">;</span> <span class="tok-n">i</span><span class="tok-o">++</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">i</span> <span class="tok-o">==</span> <span class="tok-mi">3</span><span class="tok-p">)</span>
        <span class="tok-p">{</span>
            <span class="tok-k">continue</span><span class="tok-p">;</span>
        <span class="tok-p">}</span>

        <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;%d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">i</span><span class="tok-p">);</span>
    <span class="tok-p">}</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Le code ci-dessus n&#8217;affichera pas <code>3</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code>0
1
2
4</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_switch">5.4. Switch</h3>
<div class="paragraph">
<p>Some text</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_chaines_de_caractères">6. Chaines de caractères</h2>
<div class="sectionbody">
<div class="paragraph">
<p>La gestion des chaines de caractère en C peut très vite devenir compliqué, il y&#8217;a de nombreux concepts dont il faut tenir compte, et la gestion de la mémoire est sujete à de nombreuses erreurs.</p>
</div>
<div class="paragraph">
<p>Les chaines de caractères sont stockées sous forme de tableau, chaque case contenant un caractère, suivi d&#8217;un caractère final indiquant la fin de chaine <code>\0</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./img/01-string.png" alt="01 string">
</div>
</div>
<div class="paragraph">
<p>Vous trouverez ci-dessous une liste non exhaustive de fonctions qui vous permettrons de réaliser les différentes manipulations courantes sur les chaines de caractères, ainsi que quelques conseils sur quelle fonction savoir utiliser et savoir ne pas utiliser.</p>
</div>
<div class="sect2">
<h3 id="_a_l_aide_de_la_libc">6.1. A l&#8217;aide de la libC</h3>
<div class="sect3">
<h4 id="_taille">6.1.1. Taille</h4>
<div class="ulist">
<ul>
<li>
<p><code>strlen(const char* s)</code></p>
</li>
<li>
<p><code>strnlen(const char* s, size_t maxlen)</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>La fonction <code>strlen</code> calcule la taille de la chaine de caractère passée en paramètre.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;string.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-kt">char</span> <span class="tok-o">**</span><span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-k">const</span> <span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-n">s</span> <span class="tok-o">=</span> <span class="tok-s">&quot;Hello&quot;</span><span class="tok-p">;</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;%lu</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">strlen</span><span class="tok-p">(</span><span class="tok-n">s</span><span class="tok-p">));</span> <span class="tok-c1">// affiche: 5</span>
    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>La fonction <code>strnlen</code> est sensiblement la même que <code>strlen</code> mais n&#8217;ira pas tenter de calculer la taille d&#8217;une chaine de caractère plus grande que le paramètre <code>maxlen</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;string.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-kt">char</span> <span class="tok-o">**</span><span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-k">const</span> <span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-n">s</span> <span class="tok-o">=</span> <span class="tok-s">&quot;Hello&quot;</span><span class="tok-p">;</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;%lu</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">strnlen</span><span class="tok-p">(</span><span class="tok-n">s</span><span class="tok-p">,</span> <span class="tok-mi">3</span><span class="tok-p">));</span> <span class="tok-c1">// affiche: 3</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;%lu</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">strnlen</span><span class="tok-p">(</span><span class="tok-n">s</span><span class="tok-p">,</span> <span class="tok-mi">10</span><span class="tok-p">));</span> <span class="tok-c1">// affiche: 5</span>
    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_recherche_d_un_caractère">6.1.2. Recherche d&#8217;un caractère</h4>
<div class="ulist">
<ul>
<li>
<p><code>index(const char* s, int c)</code></p>
</li>
<li>
<p><code>rindex(const char*s, int c)</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>La fonction <code>index</code> trouve la première occurence du caractère <code>c</code> dans la chaine de caractère <code>s</code>. La fonction <code>index</code> permet egalement de trouver le caractère de fin de chaine <code>\0</code> si besoin.</p>
</div>
<div class="paragraph">
<p>La fonction <code>rindex</code> fait la même chose mais trouve la dernière occurence.</p>
</div>
<div class="paragraph">
<p>Si le caractère ne se trouve pas dans la chaine de caractère, alors <code>index</code> et <code>rindex</code> renvoient <code>NULL</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;string.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-kt">char</span> <span class="tok-o">**</span><span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-k">const</span> <span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-n">s</span> <span class="tok-o">=</span> <span class="tok-s">&quot;abc def def&quot;</span><span class="tok-p">;</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;%s</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">index</span><span class="tok-p">(</span><span class="tok-n">s</span><span class="tok-p">,</span> <span class="tok-sc">&#39;d&#39;</span><span class="tok-p">));</span>  <span class="tok-c1">// affiche: def def</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;%s</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">rindex</span><span class="tok-p">(</span><span class="tok-n">s</span><span class="tok-p">,</span> <span class="tok-sc">&#39;d&#39;</span><span class="tok-p">));</span> <span class="tok-c1">// affiche: def</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;%s</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">index</span><span class="tok-p">(</span><span class="tok-n">s</span><span class="tok-p">,</span> <span class="tok-sc">&#39;z&#39;</span><span class="tok-p">));</span>  <span class="tok-c1">// affiche: (null)</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;%s</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">rindex</span><span class="tok-p">(</span><span class="tok-n">s</span><span class="tok-p">,</span> <span class="tok-sc">&#39;z&#39;</span><span class="tok-p">));</span> <span class="tok-c1">// affiche: (null)</span>
    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_comparaison">6.1.3. Comparaison</h4>
<div class="ulist">
<ul>
<li>
<p><code>strcmp(const char* s1, const char* s2)</code></p>
</li>
<li>
<p><code>strncmp(const char* s1, const char* s2, size_t n)</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>La fonction <code>strcmp</code> compare alphabétiquement deux chaines de caractère <code>s1</code> et <code>s2</code> pour trouver laquelle est censée se trouver avant l&#8217;autre.</p>
</div>
<div class="paragraph">
<p>La fonction <code>strncmp</code> fais la même chose mais ne comparera au maximum que les <code>n</code> premiers caractères des deux chaines de caractères. L&#8217;utilité étant de pouvoir comparer des chaines de caractères de tailles différentes.</p>
</div>
<div class="paragraph">
<p>Ces fonctions renvoient :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>un entier &lt; à <code>0</code> si la chaine <code>s1</code> se trouve alphabétiquement avant <code>s2</code></p>
</li>
<li>
<p><code>0</code> si les chaines sont identiques</p>
</li>
<li>
<p>un entier &gt; à <code>0</code> si la chaine <code>s2</code> se trouve alphabétiquement après <code>s2</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;string.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-kt">char</span> <span class="tok-o">**</span><span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-k">const</span> <span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-n">s1</span> <span class="tok-o">=</span> <span class="tok-s">&quot;abc def def&quot;</span><span class="tok-p">;</span>
    <span class="tok-k">const</span> <span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-n">s2</span> <span class="tok-o">=</span> <span class="tok-s">&quot;abc zef zef&quot;</span><span class="tok-p">;</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;%d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">strcmp</span><span class="tok-p">(</span><span class="tok-n">s1</span><span class="tok-p">,</span> <span class="tok-n">s2</span><span class="tok-p">));</span> <span class="tok-c1">// affiche: &lt; 0</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;%d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">strcmp</span><span class="tok-p">(</span><span class="tok-n">s2</span><span class="tok-p">,</span> <span class="tok-n">s1</span><span class="tok-p">));</span> <span class="tok-c1">// affiche: &gt; 0</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;%d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">strncmp</span><span class="tok-p">(</span><span class="tok-n">s1</span><span class="tok-p">,</span> <span class="tok-n">s2</span><span class="tok-p">,</span> <span class="tok-mi">3</span><span class="tok-p">));</span> <span class="tok-c1">// affiche: 0</span>
    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_comparaison_insensible_à_la_casse">6.1.4. Comparaison (insensible à la casse)</h4>
<div class="ulist">
<ul>
<li>
<p><code>strcasecmp(const char* s1, const char* s2)</code></p>
</li>
<li>
<p><code>strncasecmp(const char* s1, const char* s2, size_t n)</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>La fonction <code>strcasecmp</code> compare alphabétiquement deux chaines de caractère <code>s1</code> et <code>s2</code> pour trouver laquelle est censée se trouver avant l&#8217;autre. Cette fonction ignore la casse, c&#8217;est à dire qu&#8217;elle ne tiens pas compte des majuscules et des minuscules.</p>
</div>
<div class="paragraph">
<p>La fonction <code>strncasecmp</code> fais la même chose mais ne comparera au maximum que les <code>n</code> premiers caractères des deux chaines de caractères. L&#8217;utilité étant de pouvoir comparer des chaines de caractères de tailles différentes.</p>
</div>
<div class="paragraph">
<p>Ces fonctions renvoient :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>un entier &lt; à <code>0</code> si la chaine <code>s1</code> se trouve alphabétiquement avant <code>s2</code></p>
</li>
<li>
<p><code>0</code> si les chaines sont identiques (à la casse près)</p>
</li>
<li>
<p>un entier &gt; à <code>0</code> si la chaine <code>s2</code> se trouve alphabétiquement après <code>s2</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Il est à noter que ces fonctions utilisent la locale de la machine, mais les fonctions <code>strcasecmp_l</code> et <code>strncasecmp_l</code> permettent d&#8217;effectuer le même test en tenant compte de la locale de la machine.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;string.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-kt">char</span> <span class="tok-o">**</span><span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-k">const</span> <span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-n">s1</span> <span class="tok-o">=</span> <span class="tok-s">&quot;abc def def&quot;</span><span class="tok-p">;</span>
    <span class="tok-k">const</span> <span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-n">s2</span> <span class="tok-o">=</span> <span class="tok-s">&quot;abc zef zef&quot;</span><span class="tok-p">;</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;1: %d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">strcasecmp</span><span class="tok-p">(</span><span class="tok-n">s1</span><span class="tok-p">,</span> <span class="tok-n">s2</span><span class="tok-p">));</span> <span class="tok-c1">// affiche: &lt; 0</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;2: %d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">strcasecmp</span><span class="tok-p">(</span><span class="tok-n">s2</span><span class="tok-p">,</span> <span class="tok-n">s1</span><span class="tok-p">));</span> <span class="tok-c1">// affiche: &gt; 0</span>
    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_concaténation">6.1.5. Concaténation</h4>
<div class="ulist">
<ul>
<li>
<p><code>strcat(char* s1, const char* s2)</code></p>
</li>
<li>
<p><code>strncat(char* s1, const char* s2, size_t n)</code></p>
</li>
<li>
<p><code>strlcat(char* s1, const char* s2, size_t size)</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>La fonction <code>strcat</code> ajoute une copy de la chaine de caractère <code>s2</code> à la fin de la chaine de caractère <code>s1</code> et y ajoute un caractère de fin de chaine <code>\0</code>. La chaine de caractère <code>s1</code> doit avoir assez d&#8217;espace disponible pour que l&#8217;opération soit possible.</p>
</div>
<div class="paragraph">
<p>La fonction <code>strncat</code> fait la même chose mais au maximum <code>n</code> caractères seront copiés de la chaine de caractère <code>s2</code>.</p>
</div>
<div class="paragraph">
<p>Ces fonctions retournent un pointeur vers la chaine de caractère <code>s1</code>.</p>
</div>
<div class="paragraph">
<p>Il est à noter qu&#8217;il est préférable de ne pas utiliser <code>strcat</code> et <code>strncat</code> car on peut facilement s&#8217;exposer à des attaques de type buffer overflow.</p>
</div>
<div class="paragraph">
<p>C&#8217;est pourquoi il est préférable d&#8217;utiliser la fonction <code>strlcat</code>, qui ont été créée pour être plus sure. La fonction <code>strlcat</code> à l&#8217;inverse de <code>strncat</code> prends en 3ème paramètre la longueur du buffer de <code>s1</code> et non la longueur maximum de caractères à copier de la chaine de caractère <code>s2</code>. Ce qui implique que <code>strlcat</code> copiera au maximum <code>size - strlen(s1) - 1</code> caractères de la chaine <code>s2</code>.</p>
</div>
<div class="paragraph">
<p>Pour finir, la fonction <code>strlcat</code> renvoie la taille totale de la chaine de caractère qu&#8217;elle a tenté de créer, il est donc possible de vérifier si la chaine <code>s1</code> n&#8217;avait pas assez de mémoire nécessaire pour permettre d&#8217;y insérer la chaine <code>s2</code> en fin.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;string.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-kt">char</span> <span class="tok-o">**</span><span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">char</span> <span class="tok-n">s1</span><span class="tok-p">[</span><span class="tok-mi">20</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-s">&quot;Hello, &quot;</span><span class="tok-p">;</span>
    <span class="tok-k">const</span> <span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-n">s2</span> <span class="tok-o">=</span> <span class="tok-s">&quot;world!&quot;</span><span class="tok-p">;</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;%s</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">strcat</span><span class="tok-p">(</span><span class="tok-n">s1</span><span class="tok-p">,</span> <span class="tok-n">s2</span><span class="tok-p">));</span> <span class="tok-c1">// affiche: Hello, world!</span>

    <span class="tok-kt">char</span> <span class="tok-n">s3</span><span class="tok-p">[</span><span class="tok-mi">20</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-s">&quot;Hello, &quot;</span><span class="tok-p">;</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;%s</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">strncat</span><span class="tok-p">(</span><span class="tok-n">s3</span><span class="tok-p">,</span> <span class="tok-n">s2</span><span class="tok-p">,</span> <span class="tok-mi">3</span><span class="tok-p">));</span> <span class="tok-c1">// affiche: Hello, wor</span>

    <span class="tok-kt">char</span> <span class="tok-n">s4</span><span class="tok-p">[</span><span class="tok-mi">20</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-s">&quot;Hello, &quot;</span><span class="tok-p">;</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;taille: %lu, chaine: %s</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span>
           <span class="tok-n">strlcat</span><span class="tok-p">(</span><span class="tok-n">s4</span><span class="tok-p">,</span> <span class="tok-n">s2</span><span class="tok-p">,</span> <span class="tok-k">sizeof</span><span class="tok-p">(</span><span class="tok-n">s4</span><span class="tok-p">)),</span>
           <span class="tok-n">s4</span><span class="tok-p">);</span> <span class="tok-c1">// affiche: taille: 13, Hello, world!</span>

    <span class="tok-c1">// ici nous avons une chaine trop petite pour y accueillir &quot;world!&quot;&quot;</span>
    <span class="tok-kt">char</span> <span class="tok-n">s5</span><span class="tok-p">[</span><span class="tok-mi">10</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-s">&quot;Hello, &quot;</span><span class="tok-p">;</span>
    <span class="tok-kt">unsigned</span> <span class="tok-kt">long</span> <span class="tok-n">total_size</span> <span class="tok-o">=</span> <span class="tok-n">strlcat</span><span class="tok-p">(</span><span class="tok-n">s5</span><span class="tok-p">,</span> <span class="tok-n">s2</span><span class="tok-p">,</span> <span class="tok-k">sizeof</span><span class="tok-p">(</span><span class="tok-n">s5</span><span class="tok-p">));</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">total_size</span> <span class="tok-o">&gt;</span> <span class="tok-k">sizeof</span><span class="tok-p">(</span><span class="tok-n">s5</span><span class="tok-p">))</span>
    <span class="tok-p">{</span>
        <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;La taille nécessaire est de %lu</span><span class="tok-se">\n</span><span class="tok-s">mais la taille disponible était de %lu</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span>
               <span class="tok-n">total_size</span><span class="tok-p">,</span> <span class="tok-k">sizeof</span><span class="tok-p">(</span><span class="tok-n">s5</span><span class="tok-p">));</span>
        <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Résultat: %s</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">s5</span><span class="tok-p">);</span>
    <span class="tok-p">}</span>
    <span class="tok-k">else</span>
    <span class="tok-p">{</span>
        <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Il y&#39;avait assez de placer pour concaténer</span><span class="tok-se">\n</span><span class="tok-s">les deux chaines de caractère</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">);</span>
        <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Résultat: %s</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">s5</span><span class="tok-p">);</span>
    <span class="tok-p">}</span>
    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Résultat:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code>Hello, world!
Hello, wor
taille: 13, chaine: Hello, world!
La taille nécessaire est de 13
mais la taille disponible était de 10
Résultat: Hello, wo</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_copies_de_chaines_de_caractères">6.1.6. Copies de chaines de caractères</h4>
<div class="ulist">
<ul>
<li>
<p><code>strcpy(char* dest, const char* source)</code></p>
</li>
<li>
<p><code>strncpy(char* dest, const char* source, size_t len)</code></p>
</li>
<li>
<p><code>stpcpy(char* dest, const char* source)</code></p>
</li>
<li>
<p><code>stpncpy(char* dest, const char* source, size_t len)</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Les fonctions <code>strcpy</code> et <code>stpcpy</code> copient la chaine de caractères <code>source</code> vers la zone mémoire <code>dest</code> (incluant le caractère de fin de chaine <code>0</code>).</p>
</div>
<div class="paragraph">
<p>Les fonctions <code>strncpy</code> et <code>stpncpy</code> copient au plus <code>len</code> caractères de la chaine de caractères <code>source</code> vers la zone mémoire <code>dest</code> (incluant le caractère de fin de chaine <code>0</code>). Si la taille de <code>source</code> est plus petit que <code>len</code> alors le reste de la zone mémoire <code>dest</code> est remplie à l&#8217;aide de caractère de fin de chaine <code>\0</code>. A noter que dans le cas contraire <code>dest</code> ne sera pas alors terminée par <code>\0</code>.</p>
</div>
<div class="paragraph">
<p>Les fonctions <code>strcpy</code> et <code>strncpy</code> retournent un pointeur vers la zone mémoire <code>dest</code>, alors que les fonctions <code>stpcpy</code> et <code>stpncpy</code> retournent un pointeur vers le caractère <code>\0</code> de la chaine <code>dest</code>. Si comme indiqué auparavant la chaine <code>dest</code> n&#8217;est pas terminée à l&#8217;aide de <code>\0</code> par <code>stpncpy</code> alors la fonction renverra vers <code>dest[len]</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdlib.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;string.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-kt">char</span> <span class="tok-o">**</span><span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-k">const</span> <span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-n">s1</span> <span class="tok-o">=</span> <span class="tok-s">&quot;Hello&quot;</span><span class="tok-p">;</span>
    <span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-n">s2</span> <span class="tok-o">=</span> <span class="tok-n">malloc</span><span class="tok-p">(</span><span class="tok-n">strlen</span><span class="tok-p">(</span><span class="tok-n">s1</span><span class="tok-p">)</span> <span class="tok-o">*</span> <span class="tok-k">sizeof</span><span class="tok-p">(</span><span class="tok-kt">char</span><span class="tok-p">));</span>
    <span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-n">rs2</span> <span class="tok-o">=</span> <span class="tok-n">strcpy</span><span class="tok-p">(</span><span class="tok-n">s2</span><span class="tok-p">,</span> <span class="tok-n">s1</span><span class="tok-p">);</span>
    <span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-n">s3</span> <span class="tok-o">=</span> <span class="tok-n">malloc</span><span class="tok-p">(</span><span class="tok-n">strlen</span><span class="tok-p">(</span><span class="tok-n">s1</span><span class="tok-p">)</span> <span class="tok-o">*</span> <span class="tok-k">sizeof</span><span class="tok-p">(</span><span class="tok-kt">char</span><span class="tok-p">));</span>
    <span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-n">rs3</span> <span class="tok-o">=</span> <span class="tok-n">strncpy</span><span class="tok-p">(</span><span class="tok-n">s3</span><span class="tok-p">,</span> <span class="tok-n">s1</span><span class="tok-p">,</span> <span class="tok-mi">3</span><span class="tok-p">);</span>

    <span class="tok-c1">// s1: Hello</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;s1: %s</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">s1</span><span class="tok-p">);</span>
    <span class="tok-c1">// s2: Hello ; taille: 5 ; *rs2: H</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;s2: %s ; taille: %lu ; *rs2: %c</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">s2</span><span class="tok-p">,</span> <span class="tok-n">strlen</span><span class="tok-p">(</span><span class="tok-n">s2</span><span class="tok-p">),</span> <span class="tok-o">*</span><span class="tok-n">rs2</span><span class="tok-p">);</span>
    <span class="tok-c1">// s3: Hel ; taille: 3 ; *rs3: H</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;s3: %s ; taille: %lu ; *rs3: %c</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">s3</span><span class="tok-p">,</span> <span class="tok-n">strlen</span><span class="tok-p">(</span><span class="tok-n">s3</span><span class="tok-p">),</span> <span class="tok-o">*</span><span class="tok-n">rs3</span><span class="tok-p">);</span>

    <span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-n">p2</span> <span class="tok-o">=</span> <span class="tok-n">malloc</span><span class="tok-p">(</span><span class="tok-n">strlen</span><span class="tok-p">(</span><span class="tok-n">s1</span><span class="tok-p">)</span> <span class="tok-o">*</span> <span class="tok-k">sizeof</span><span class="tok-p">(</span><span class="tok-kt">char</span><span class="tok-p">));</span>
    <span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-n">ps2</span> <span class="tok-o">=</span> <span class="tok-n">stpcpy</span><span class="tok-p">(</span><span class="tok-n">p2</span><span class="tok-p">,</span> <span class="tok-n">s1</span><span class="tok-p">);</span>
    <span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-n">p3</span> <span class="tok-o">=</span> <span class="tok-n">malloc</span><span class="tok-p">(</span><span class="tok-n">strlen</span><span class="tok-p">(</span><span class="tok-n">s1</span><span class="tok-p">)</span> <span class="tok-o">*</span> <span class="tok-k">sizeof</span><span class="tok-p">(</span><span class="tok-kt">char</span><span class="tok-p">));</span>
    <span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-n">ps3</span> <span class="tok-o">=</span> <span class="tok-n">stpncpy</span><span class="tok-p">(</span><span class="tok-n">p3</span><span class="tok-p">,</span> <span class="tok-n">s1</span><span class="tok-p">,</span> <span class="tok-mi">3</span><span class="tok-p">);</span>

    <span class="tok-c1">// p2: Hello ; taille: 5 ; *ps2: 0</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;p2: %s ; taille: %lu ; *ps2: %d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">p2</span><span class="tok-p">,</span> <span class="tok-n">strlen</span><span class="tok-p">(</span><span class="tok-n">p2</span><span class="tok-p">),</span> <span class="tok-o">*</span><span class="tok-n">ps2</span><span class="tok-p">);</span>
    <span class="tok-c1">// p3: Hel ; taille: 3 ; *ps3: 0</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;p3: %s ; taille: %lu ; *ps3: %d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">p3</span><span class="tok-p">,</span> <span class="tok-n">strlen</span><span class="tok-p">(</span><span class="tok-n">p3</span><span class="tok-p">),</span> <span class="tok-o">*</span><span class="tok-n">ps3</span><span class="tok-p">);</span>

    <span class="tok-n">free</span><span class="tok-p">(</span><span class="tok-n">s2</span><span class="tok-p">);</span>
    <span class="tok-n">free</span><span class="tok-p">(</span><span class="tok-n">p2</span><span class="tok-p">);</span>
    <span class="tok-n">free</span><span class="tok-p">(</span><span class="tok-n">s3</span><span class="tok-p">);</span>
    <span class="tok-n">free</span><span class="tok-p">(</span><span class="tok-n">p3</span><span class="tok-p">);</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_duplication">6.1.7. Duplication</h4>
<div class="ulist">
<ul>
<li>
<p><code>char* strdup(const char *s1)</code></p>
</li>
<li>
<p><code>char* strndup(const char *s1, size_t n)</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Les fonctions <code>strdup</code> et <code>strndup</code> allouent suffisament de mémoire pour créer une copie de la chaine de caractère <code>s1</code>, créent la copie et retourne un pointeur vers cette zone mémoire. Cette zone mémoire étant allouée par <code>strdup</code> c&#8217;est donc à vous de ne pas oublier de la rendre quand vous n&#8217;en avez plus besoin à l&#8217;aide de la fonction <code>free()</code>.</p>
</div>
<div class="paragraph">
<p>Si il n&#8217;y a plus assez de mémoire pour créer une copie alors les fonctions <code>strdup</code> et <code>strndup</code> retournent <code>NULL</code> et la variable globale <code>errno</code> vaut <code>ENOMEM</code>.</p>
</div>
<div class="paragraph">
<p>La fonction <code>strndup</code> copie au plus <code>n</code> caractères de la chaine <code>s1</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdlib.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;string.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-kt">char</span> <span class="tok-o">**</span><span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-n">name1</span> <span class="tok-o">=</span> <span class="tok-n">strdup</span><span class="tok-p">(</span><span class="tok-s">&quot;John&quot;</span><span class="tok-p">);</span>
    <span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-n">name2</span> <span class="tok-o">=</span> <span class="tok-n">strdup</span><span class="tok-p">(</span><span class="tok-n">name1</span><span class="tok-p">);</span>

    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;name1: %s @ %p</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">name1</span><span class="tok-p">,</span> <span class="tok-n">name1</span><span class="tok-p">);</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;name2: %s @ %p</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">name2</span><span class="tok-p">,</span> <span class="tok-n">name2</span><span class="tok-p">);</span>

    <span class="tok-n">free</span><span class="tok-p">(</span><span class="tok-n">name1</span><span class="tok-p">);</span>
    <span class="tok-n">free</span><span class="tok-p">(</span><span class="tok-n">name2</span><span class="tok-p">);</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Donne à l&#8217;éxecution:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code>name1: John @ 0x7fa67ec02770
name2: John @ 0x7fa67ec02780</code></pre>
</div>
</div>
<div class="paragraph">
<p>On remarque que les chaines sont équivalentes, mais qu&#8217;elles n&#8217;ont pas la même adresse mémoire, ce sont donc des copies à part entière, et modifier la chaine <code>name2</code> ne modifiera donc pas la chaine <code>name1</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_scindage">6.1.8. Scindage</h4>
<div class="ulist">
<ul>
<li>
<p><code>char* strtok(char *str, char *separator)</code></p>
</li>
<li>
<p><code>char* strsep(char **stringp, const char *delim)</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>La fonction <code>strtok</code> permet de scinder la chaine <code>str</code> suivant un séparateur <code>separator</code>. Il faut l&#8217;appeler plusieurs fois pour récupérer les différents tokens. Si le séparateur ne peut plus être trouvé dans le reste de la chaine, alors <code>strtok</code> renvoie <code>NULL</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdlib.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;string.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-kt">char</span> <span class="tok-o">**</span><span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-n">names</span> <span class="tok-o">=</span> <span class="tok-n">strdup</span><span class="tok-p">(</span><span class="tok-s">&quot;Alexandre, Julien, Eva, Amélie&quot;</span><span class="tok-p">);</span>
    <span class="tok-kt">char</span> <span class="tok-n">separator</span><span class="tok-p">[]</span> <span class="tok-o">=</span> <span class="tok-s">&quot;, &quot;</span><span class="tok-p">;</span>

    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Recherche de prénoms dans: %s</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">names</span><span class="tok-p">);</span>

    <span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-n">name</span> <span class="tok-o">=</span> <span class="tok-n">strtok</span><span class="tok-p">(</span><span class="tok-n">names</span><span class="tok-p">,</span> <span class="tok-n">separator</span><span class="tok-p">);</span>
    <span class="tok-k">while</span> <span class="tok-p">(</span><span class="tok-n">name</span> <span class="tok-o">!=</span> <span class="tok-nb">NULL</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;  Prénom: %s</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">name</span><span class="tok-p">);</span>
        <span class="tok-n">name</span> <span class="tok-o">=</span> <span class="tok-n">strtok</span><span class="tok-p">(</span><span class="tok-nb">NULL</span><span class="tok-p">,</span> <span class="tok-n">separator</span><span class="tok-p">);</span>
    <span class="tok-p">}</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Etat de la variable names après recherche: %s</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">names</span><span class="tok-p">);</span>

    <span class="tok-n">free</span><span class="tok-p">(</span><span class="tok-n">names</span><span class="tok-p">);</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Qui donne après exécution:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code>Recherche de prénoms dans: Alexandre, Julien, Eva, Amélie
  Prénom: Alexandre
  Prénom: Julien
  Prénom: Eva
  Prénom: Amélie
Etat de la variable names après recherche: Alexandre</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme on peut le voir, l&#8217;utilisation de <code>strtok</code> a modifié la chaine de caractères <code>names</code>.</p>
</div>
<div class="paragraph">
<p>Exemple de la même fonction avec <code>strsep</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdlib.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;string.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-kt">char</span> <span class="tok-o">**</span><span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-n">names</span> <span class="tok-o">=</span> <span class="tok-n">strdup</span><span class="tok-p">(</span><span class="tok-s">&quot;Alexandre, Julien, Eva, Jessica&quot;</span><span class="tok-p">);</span>
    <span class="tok-kt">char</span> <span class="tok-n">separator</span><span class="tok-p">[]</span> <span class="tok-o">=</span> <span class="tok-s">&quot;, &quot;</span><span class="tok-p">;</span>

    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Recherche de prénoms dans: %s</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">names</span><span class="tok-p">);</span>
    <span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-n">name</span> <span class="tok-o">=</span> <span class="tok-nb">NULL</span><span class="tok-p">;</span>
    <span class="tok-k">while</span> <span class="tok-p">((</span><span class="tok-n">name</span> <span class="tok-o">=</span> <span class="tok-n">strsep</span><span class="tok-p">(</span><span class="tok-o">&amp;</span><span class="tok-n">names</span><span class="tok-p">,</span> <span class="tok-n">separator</span><span class="tok-p">))</span> <span class="tok-o">!=</span> <span class="tok-nb">NULL</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-o">!</span><span class="tok-n">strlen</span><span class="tok-p">(</span><span class="tok-n">name</span><span class="tok-p">))</span>
            <span class="tok-k">continue</span><span class="tok-p">;</span>

        <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;  Prénom: [%s]</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">name</span><span class="tok-p">);</span>
    <span class="tok-p">}</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Etat de la variable names après recherche: %s</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">names</span><span class="tok-p">);</span>
    <span class="tok-n">free</span><span class="tok-p">(</span><span class="tok-n">names</span><span class="tok-p">);</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Qui donne après exécution:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code>Recherche de prénoms dans: Alexandre, Julien, Eva, Jessica
  Prénom: [Alexandre]
  Prénom: [Julien]
  Prénom: [Eva]
  Prénom: [Jessica]
Etat de la variable names après recherche: (null)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme on peut le voir, l&#8217;utilisation de <code>strsep</code> a également modifié la chaine de caractères <code>names</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_alternatives">6.2. Alternatives</h3>
<div class="paragraph">
<p>Il existe des librairies que vous pourrez trouver sur internet vous permettant de manipuler des chaines de caractères un plus simplement qu&#8217;avec les fonctions de la libC.</p>
</div>
<div class="paragraph">
<p>Par exemple la librairie <strong>sds</strong> que vous pourrez trouver à l&#8217;adresse suivante: <a href="https://github.com/antirez/sds" class="bare">https://github.com/antirez/sds</a>.</p>
</div>
<div class="paragraph">
<p>Cette librairie permet des usages avancées comme la fusion de chaines de caractères, l&#8217;élagage (trim en anglais), l&#8217;allocation dynamique de mémoire, etc.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tableaux">7. Tableaux</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Les tableaux (<strong>array</strong> en anglais) sont une structure de données de taille fixe qui peuvent stocker séquentiellement une collection d&#8217;éléments.</p>
</div>
<div class="paragraph">
<p>Au lieu de déclarer 10 variables de type <code>int</code> par exemple <code>num1</code>, &#8230;&#8203; <code>num10</code> on peut déclarer une variable de type tableau de 10 éléments.</p>
</div>
<div class="paragraph">
<p>Pour déclarer un tableau en C on doit déclarer son type, son nom et entre crochets le nombre d&#8217;éléments:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-n">type</span> <span class="tok-n">variable</span><span class="tok-p">[</span><span class="tok-n">taille</span><span class="tok-p">];</span>
<span class="tok-c1">// example</span>
<span class="tok-kt">int</span> <span class="tok-n">numbers</span><span class="tok-p">[</span><span class="tok-mi">10</span><span class="tok-p">];</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Pour initialiser un tableau en une seule opération il est possible si on connait la taille à l&#8217;avance de faire comme le code suivant :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-kt">int</span> <span class="tok-n">numbers</span><span class="tok-p">[</span><span class="tok-mi">5</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">{</span><span class="tok-mi">1</span><span class="tok-p">,</span> <span class="tok-mi">2</span><span class="tok-p">,</span> <span class="tok-mi">3</span><span class="tok-p">,</span> <span class="tok-mi">4</span><span class="tok-p">,</span> <span class="tok-mi">5</span><span class="tok-p">};</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Cela fonctionne également si la taille n&#8217;est pas connue mais peut-être déterminée par le compilateur:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-kt">int</span> <span class="tok-n">numbers</span><span class="tok-p">[]</span> <span class="tok-o">=</span> <span class="tok-p">{</span><span class="tok-mi">1</span><span class="tok-p">,</span> <span class="tok-mi">2</span><span class="tok-p">,</span> <span class="tok-mi">3</span><span class="tok-p">,</span> <span class="tok-mi">4</span><span class="tok-p">,</span> <span class="tok-mi">5</span><span class="tok-p">};</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Il est possible d&#8217;accéder à un élément en lecture et en écriture à l&#8217;aide de sa position dans le tableau. Les positions commencent à l&#8217;indice <code>0</code>, c&#8217;est à dire qu&#8217;un tableau de 5 éléments contient les éléments aux indices <code>0</code>, <code>1</code>, <code>2</code>, <code>3</code> et <code>4</code> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-kt">int</span> <span class="tok-n">numbers</span><span class="tok-p">[]</span> <span class="tok-o">=</span> <span class="tok-p">{</span><span class="tok-mi">1</span><span class="tok-p">,</span> <span class="tok-mi">2</span><span class="tok-p">,</span> <span class="tok-mi">3</span><span class="tok-p">,</span> <span class="tok-mi">4</span><span class="tok-p">,</span> <span class="tok-mi">5</span><span class="tok-p">};</span>
<span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;%d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">numbers</span><span class="tok-p">[</span><span class="tok-mi">0</span><span class="tok-p">]);</span> <span class="tok-c1">// 1</span>
<span class="tok-n">numbers</span><span class="tok-p">[</span><span class="tok-mi">3</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-mi">40</span><span class="tok-p">;</span> <span class="tok-c1">// met à jour le 4ème élément (commence à 0)</span>
<span class="tok-c1">// numbers vaut {1, 2, 3, 40, 5};</span></code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_tableaux_multi_dimensionnels">7.1. Tableaux multi dimensionnels</h4>
<div class="paragraph">
<p>Les tableaux peuvent avoir de multiples dimensions, par exemple pour représenter une matrice identité de taille 3 il est possible de la déclarer de la sorte:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-kt">int</span> <span class="tok-n">matrix</span><span class="tok-p">[</span><span class="tok-mi">3</span><span class="tok-p">][</span><span class="tok-mi">3</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">{{</span><span class="tok-mi">1</span><span class="tok-p">,</span> <span class="tok-mi">0</span><span class="tok-p">,</span> <span class="tok-mi">0</span><span class="tok-p">},</span> <span class="tok-p">{</span><span class="tok-mi">0</span><span class="tok-p">,</span> <span class="tok-mi">1</span><span class="tok-p">,</span> <span class="tok-mi">0</span><span class="tok-p">},</span> <span class="tok-p">{</span><span class="tok-mi">0</span><span class="tok-p">,</span> <span class="tok-mi">0</span><span class="tok-p">,</span> <span class="tok-mi">0</span><span class="tok-p">}};</span>
<span class="tok-c1">// pour accéder au deuxième colonne de la deuxième ligne:</span>
<span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;%d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">matrix</span><span class="tok-p">[</span><span class="tok-mi">1</span><span class="tok-p">][</span><span class="tok-mi">1</span><span class="tok-p">]);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans ce cas particulier il faut déclarer au moins les tailles des <code>n-1</code> dimensions, donc pour un tableau à deux dimensions, il faut au moins déclarer le nombre des colonnes.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-c1">// invalide:</span>
<span class="tok-kt">int</span> <span class="tok-n">matrix</span><span class="tok-p">[][]</span> <span class="tok-o">=</span> <span class="tok-p">{{</span><span class="tok-mi">1</span><span class="tok-p">,</span> <span class="tok-mi">0</span><span class="tok-p">,</span> <span class="tok-mi">0</span><span class="tok-p">},</span> <span class="tok-p">{</span><span class="tok-mi">0</span><span class="tok-p">,</span> <span class="tok-mi">1</span><span class="tok-p">,</span> <span class="tok-mi">0</span><span class="tok-p">},</span> <span class="tok-p">{</span><span class="tok-mi">0</span><span class="tok-p">,</span> <span class="tok-mi">0</span><span class="tok-p">,</span> <span class="tok-mi">0</span><span class="tok-p">}};</span>
<span class="tok-c1">// valide</span>
<span class="tok-kt">int</span> <span class="tok-n">matrix</span><span class="tok-p">[][</span><span class="tok-mi">3</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">{{</span><span class="tok-mi">1</span><span class="tok-p">,</span> <span class="tok-mi">0</span><span class="tok-p">,</span> <span class="tok-mi">0</span><span class="tok-p">},</span> <span class="tok-p">{</span><span class="tok-mi">0</span><span class="tok-p">,</span> <span class="tok-mi">1</span><span class="tok-p">,</span> <span class="tok-mi">0</span><span class="tok-p">},</span> <span class="tok-p">{</span><span class="tok-mi">0</span><span class="tok-p">,</span> <span class="tok-mi">0</span><span class="tok-p">,</span> <span class="tok-mi">0</span><span class="tok-p">}};</span>
<span class="tok-c1">// valide</span>
<span class="tok-kt">int</span> <span class="tok-n">matrix</span><span class="tok-p">[</span><span class="tok-mi">3</span><span class="tok-p">][</span><span class="tok-mi">3</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">{{</span><span class="tok-mi">1</span><span class="tok-p">,</span> <span class="tok-mi">0</span><span class="tok-p">,</span> <span class="tok-mi">0</span><span class="tok-p">},</span> <span class="tok-p">{</span><span class="tok-mi">0</span><span class="tok-p">,</span> <span class="tok-mi">1</span><span class="tok-p">,</span> <span class="tok-mi">0</span><span class="tok-p">},</span> <span class="tok-p">{</span><span class="tok-mi">0</span><span class="tok-p">,</span> <span class="tok-mi">0</span><span class="tok-p">,</span> <span class="tok-mi">0</span><span class="tok-p">}};</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_directives">8. Directives</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_gestion_de_la_mémoire">9. Gestion de la mémoire</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Le langage C laisse au programmeur la gestion de la mémoire, il est donc important de comprendre les différents concepts.</p>
</div>
<div class="paragraph">
<p>Vous avez pu voir avec l&#8217;utilisation de chaines de caractère, ou bien de tableaux dont on ne connait pas la taille qu&#8217;on a donc besoin d&#8217;allouer de la mémoire.</p>
</div>
<div class="paragraph">
<p>Dans ce cas la libC nous fournit à travers la bibliothèque <code>&lt;stdlib.h&gt;</code> 4 fonctions dont on ne pourra se passer: <code>malloc</code>, <code>calloc</code>, <code>realloc</code> et <code>free</code>.</p>
</div>
<div class="sect2">
<h3 id="_code_malloc_code">9.1. <code>malloc</code></h3>
<div class="paragraph">
<p>C&#8217;est la fonction la plus connue, elle sert à allouer de la mémoire. Pour ça il vous suffit de lui dire quelle taille on souhaite allouer (en nombre d&#8217;octets). La taille dépends évidemment du type de données à stocker. Cette taille est calculable à l&#8217;aide de la fonction <code>sizeof</code>.</p>
</div>
<div class="paragraph">
<p>Par exemple pour allouer de la mémoire suffisante pour plasser 10 nombres entiers on écrira:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-kt">int</span> <span class="tok-o">*</span><span class="tok-n">nombres</span> <span class="tok-o">=</span> <span class="tok-n">malloc</span><span class="tok-p">(</span><span class="tok-mi">10</span> <span class="tok-o">*</span> <span class="tok-k">sizeof</span><span class="tok-p">(</span><span class="tok-kt">int</span><span class="tok-p">));</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Par exemple on peut créer un programme interactif qui demandera à l&#8217;utilisateur de saisir un nombre de prénoms qu&#8217;il souhaite entrer, et les stocker dans un tableau:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdlib.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;string.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;readline/readline.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-kt">char</span> <span class="tok-o">**</span><span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">number</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-kt">char</span> <span class="tok-o">**</span><span class="tok-n">names</span> <span class="tok-o">=</span> <span class="tok-nb">NULL</span><span class="tok-p">;</span>

    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Combien de noms voulez-vous saisir ?</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">);</span>
    <span class="tok-n">scanf</span><span class="tok-p">(</span><span class="tok-s">&quot;%d&quot;</span><span class="tok-p">,</span> <span class="tok-o">&amp;</span><span class="tok-n">number</span><span class="tok-p">);</span>

    <span class="tok-kt">int</span> <span class="tok-n">size</span> <span class="tok-o">=</span> <span class="tok-n">number</span> <span class="tok-o">*</span> <span class="tok-k">sizeof</span><span class="tok-p">(</span><span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-p">);</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;-----</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">);</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;On alloue %d octets</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">size</span><span class="tok-p">);</span>
    <span class="tok-c1">// on alloue autant de mémoire que demandé par l&#39;utilisateur</span>
    <span class="tok-n">names</span> <span class="tok-o">=</span> <span class="tok-n">malloc</span><span class="tok-p">(</span><span class="tok-n">size</span><span class="tok-p">);</span>
    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <span class="tok-n">i</span> <span class="tok-o">&lt;</span> <span class="tok-n">number</span><span class="tok-p">;</span> <span class="tok-n">i</span><span class="tok-o">++</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-n">names</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-n">readline</span><span class="tok-p">(</span><span class="tok-s">&quot;Prénom: &quot;</span><span class="tok-p">);</span>
    <span class="tok-p">}</span>

    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;-----</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">);</span>
    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <span class="tok-n">i</span> <span class="tok-o">&lt;</span> <span class="tok-n">number</span><span class="tok-p">;</span> <span class="tok-o">++</span><span class="tok-n">i</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Vous avez saisi: %s</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">names</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]);</span>
        <span class="tok-c1">// ne pas oublier de libérer chaque chaine alloué par readline()</span>
        <span class="tok-n">free</span><span class="tok-p">(</span><span class="tok-n">names</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]);</span>
    <span class="tok-p">}</span>

    <span class="tok-c1">// ne pas oublier de libérer la mémoire allouée plus tot</span>
    <span class="tok-n">free</span><span class="tok-p">(</span><span class="tok-n">names</span><span class="tok-p">);</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Qui donne par exemple le résultat suivant :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code>Combien de noms voulez-vous saisir ?
2
-----
On alloue 16 octets
Prénom: Alexandre
Prénom: Eva
-----
Vous avez saisi: Alexandre
Vous avez saisi: Eva</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_code_calloc_code">9.2. <code>calloc</code></h3>
<div class="paragraph">
<p>La fonction <code>malloc</code> sert à allouer une zone mémoire. La fonction <code>calloc</code> sert à allouer une zone mémoire contigue. La mémoire allouée est alors pré-initialisée avec des bytes de valeur <code>0</code>.</p>
</div>
<div class="paragraph">
<p>Une autre différence avec <code>malloc</code> est que <code>calloc</code> fais le calcul de la taille seul. Cette fonction demandant le nombre d&#8217;éléments et la taille de chaque élement, là où pour <code>malloc</code> nous devions faire la multiplication nous même.</p>
</div>
<div class="paragraph">
<p>Le programme suivant est donc équivalent au programme juste plus haut :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdlib.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;string.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;readline/readline.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-kt">char</span> <span class="tok-o">**</span><span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">number</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-kt">char</span> <span class="tok-o">**</span><span class="tok-n">names</span> <span class="tok-o">=</span> <span class="tok-nb">NULL</span><span class="tok-p">;</span>

    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Combien de noms voulez-vous saisir ?</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">);</span>
    <span class="tok-n">scanf</span><span class="tok-p">(</span><span class="tok-s">&quot;%d&quot;</span><span class="tok-p">,</span> <span class="tok-o">&amp;</span><span class="tok-n">number</span><span class="tok-p">);</span>

    <span class="tok-c1">// on alloue autant de mémoire que demandé par l&#39;utilisateur</span>
    <span class="tok-n">names</span> <span class="tok-o">=</span> <span class="tok-n">calloc</span><span class="tok-p">(</span><span class="tok-n">number</span><span class="tok-p">,</span> <span class="tok-k">sizeof</span><span class="tok-p">(</span><span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-p">));</span>
    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <span class="tok-n">i</span> <span class="tok-o">&lt;</span> <span class="tok-n">number</span><span class="tok-p">;</span> <span class="tok-n">i</span><span class="tok-o">++</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-n">names</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-n">readline</span><span class="tok-p">(</span><span class="tok-s">&quot;Prénom: &quot;</span><span class="tok-p">);</span>
    <span class="tok-p">}</span>

    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;-----</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">);</span>
    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <span class="tok-n">i</span> <span class="tok-o">&lt;</span> <span class="tok-n">number</span><span class="tok-p">;</span> <span class="tok-o">++</span><span class="tok-n">i</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Vous avez saisi: %s</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">names</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]);</span>
        <span class="tok-c1">// ne pas oublier de libérer chaque chaine alloué par readline()</span>
        <span class="tok-n">free</span><span class="tok-p">(</span><span class="tok-n">names</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]);</span>
    <span class="tok-p">}</span>

    <span class="tok-c1">// ne pas oublier de libérer la mémoire allouée plus tot</span>
    <span class="tok-n">free</span><span class="tok-p">(</span><span class="tok-n">names</span><span class="tok-p">);</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_code_realloc_code">9.3. <code>realloc</code></h3>
<div class="paragraph">
<p>La fonction <code>realloc</code> permet de réallouer de la mémoire supplémentaire pour une zone mémoire déjà allouée. Imaginons le scenario où l&#8217;on prévoit de stocker N prénoms dans une zone mémoire, mais finalement l&#8217;utilisateur veut en tapper plus. Il serait possible d&#8217;allouer une autre zone mémoire de la taille initiale + la nouvelle taille et de recopier les anciens éléments vers la nouvelle zone mémoire, mais ce serait couteux pour rien. C&#8217;est là que la fonction <code>realloc</code> rentre en compte.</p>
</div>
<div class="paragraph">
<p>Par exemple, voici un programme qui demande à un utilisateur de saisir un prénom jusqu&#8217;à ce qu&#8217;il entre un prénom vide. A chaque nouveau prénom on réalloue de la mémoire à l&#8217;aide de <code>realloc</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdlib.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;string.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;readline/readline.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-kt">char</span> <span class="tok-o">**</span><span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">char</span> <span class="tok-o">**</span><span class="tok-n">names</span> <span class="tok-o">=</span> <span class="tok-nb">NULL</span><span class="tok-p">;</span>

    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Saisissez autant de prénoms que vous voulez.</span><span class="tok-se">\n</span><span class="tok-s">Terminez par un prénom vide pour quitter.</span><span class="tok-se">\n\n</span><span class="tok-s">&quot;</span><span class="tok-p">);</span>
    <span class="tok-n">names</span> <span class="tok-o">=</span> <span class="tok-n">malloc</span><span class="tok-p">(</span><span class="tok-mi">1</span> <span class="tok-o">*</span> <span class="tok-k">sizeof</span><span class="tok-p">(</span><span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-p">));</span>
    <span class="tok-kt">int</span> <span class="tok-n">number</span> <span class="tok-o">=</span> <span class="tok-mi">1</span><span class="tok-p">;</span>
    <span class="tok-k">for</span> <span class="tok-p">(;;</span> <span class="tok-n">number</span><span class="tok-o">++</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-c1">// number - 1 car les tableaux commencent à l&#39;indice 0</span>
        <span class="tok-n">names</span><span class="tok-p">[</span><span class="tok-n">number</span> <span class="tok-o">-</span> <span class="tok-mi">1</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-n">gets</span><span class="tok-p">();</span> <span class="tok-c1">//(&quot;Prénom: &quot;);</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">strlen</span><span class="tok-p">(</span><span class="tok-n">names</span><span class="tok-p">[</span><span class="tok-n">number</span> <span class="tok-o">-</span> <span class="tok-mi">1</span><span class="tok-p">])</span> <span class="tok-o">==</span> <span class="tok-mi">0</span><span class="tok-p">)</span>
        <span class="tok-p">{</span>
            <span class="tok-k">break</span><span class="tok-p">;</span>
        <span class="tok-p">}</span>
        <span class="tok-c1">// ici number + 1 car on ajoute un car on veut allouer</span>
        <span class="tok-c1">// de la mémoire pour un prochain prénom</span>
        <span class="tok-n">names</span> <span class="tok-o">=</span> <span class="tok-n">realloc</span><span class="tok-p">(</span><span class="tok-n">names</span><span class="tok-p">,</span> <span class="tok-p">(</span><span class="tok-n">number</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-p">)</span> <span class="tok-o">*</span> <span class="tok-k">sizeof</span><span class="tok-p">(</span><span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-p">));</span>
    <span class="tok-p">}</span>

    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <span class="tok-n">i</span> <span class="tok-o">&lt;</span> <span class="tok-n">number</span><span class="tok-p">;</span> <span class="tok-o">++</span><span class="tok-n">i</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">strlen</span><span class="tok-p">(</span><span class="tok-n">names</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]))</span>
        <span class="tok-p">{</span>
            <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Vous avez saisi: %s</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">names</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]);</span>
        <span class="tok-p">}</span>
        <span class="tok-c1">// ne pas oublier de libérer chaque chaine alloué par readline()</span>
        <span class="tok-c1">//free(names[i]);</span>
    <span class="tok-p">}</span>

    <span class="tok-c1">// ne pas oublier de libérer la mémoire allouée plus tot</span>
    <span class="tok-c1">//free(names);</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_fonctions">10. Fonctions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>On a vu jusqu&#8217;à maintenant l&#8217;utilisation de nombreuses fonctions, mais pourquoi ne pas créer les notres?</p>
</div>
<div class="paragraph">
<p>Une fonction se présente ainsi:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-n">type_de_retour</span> <span class="tok-nf">nom_de_la_fonction</span><span class="tok-p">(</span><span class="tok-n">liste</span> <span class="tok-n">des</span> <span class="tok-n">parametres</span><span class="tok-p">)</span> <span class="tok-p">{</span>
   <span class="tok-n">corps</span> <span class="tok-n">de</span> <span class="tok-n">la</span> <span class="tok-n">fonction</span>

   <span class="tok-k">return</span> <span class="tok-n">valeur</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Une fonction en C possède une signature (souvent dans un fichier <code>.h</code>) et une implémentation (dans un fichier <code>.c</code>).</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Type de retour</strong> − une fonction peut renvoyer une valeur, par exemple un <code>int</code>, un <code>char*</code>. Parfois les fonctions ne renvoient rien (c&#8217;est souvent appelé une <strong>procédure</strong>), et dans ce cas le mot clé à indiquer en type de retour est <strong>void</strong>.</p>
</li>
<li>
<p><strong>Nom de la fonction</strong> − c&#8217;est le nom de la fonction, que vous utiliserez pour l&#8217;appeler, il faut donc faire attention de ne pas utiliser un nom de fonction déjà pris. Certains langages de programmation possèdent un système de <strong>namespacing</strong> pour éviter ce genre de cas (Java, C++, &#8230;&#8203;)</p>
</li>
<li>
<p><strong>Liste des paramètres</strong> − une fonction n&#8217;est pas obligée de prendre un paramètre, et elle peut en prendre plusieurs aussi</p>
</li>
<li>
<p><strong>Corps de la fonction</strong> - une fonction peut exécuter des choses diverses et variées, c&#8217;est ce qui définit son fonctionnement.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Voici quelques exemples:</p>
</div>
<div class="paragraph">
<p>Calculer le maximum entre deux entiers.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-kt">int</span> <span class="tok-nf">max</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">a</span><span class="tok-p">,</span> <span class="tok-kt">int</span> <span class="tok-n">b</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">result</span><span class="tok-p">;</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">a</span> <span class="tok-o">&gt;</span> <span class="tok-n">b</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">a</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>
    <span class="tok-k">else</span>
    <span class="tok-p">{</span>
        <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">b</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>

    <span class="tok-k">return</span> <span class="tok-n">result</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Que l&#8217;on peut simplifier par:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-kt">int</span> <span class="tok-nf">max</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">a</span><span class="tok-p">,</span> <span class="tok-kt">int</span> <span class="tok-n">b</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">a</span> <span class="tok-o">&gt;</span> <span class="tok-n">b</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-k">return</span> <span class="tok-n">a</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>
    <span class="tok-k">else</span>
    <span class="tok-p">{</span>
        <span class="tok-k">return</span> <span class="tok-n">b</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Ou encore:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-kt">int</span> <span class="tok-nf">max</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">a</span><span class="tok-p">,</span> <span class="tok-kt">int</span> <span class="tok-n">b</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-k">return</span> <span class="tok-n">a</span> <span class="tok-o">&gt;</span> <span class="tok-n">b</span> <span class="tok-o">?</span> <span class="tok-nl">a</span> <span class="tok-p">:</span> <span class="tok-n">b</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Il existe deux fonctions <code>toupper</code> et <code>tolower</code> dans la bibliothèque <code>ctype.h</code> qui permettent de renvoyer l&#8217;équivalent en majuscule et minuscule d&#8217;un caractère donné.</p>
</div>
<div class="paragraph">
<p>Tentons de faire la même chose sur une chaine de caractère entière. Voici deux façons de faire, l&#8217;une renvoyant <code>void</code> et modifiant directement la chaine de caractère passée en paramètre, et l&#8217;autre créant une copie du paramètre et modifiant cette copie avant de la renvoyer.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdlib.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;ctype.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;string.h&gt;</span><span class="tok-cp"></span>

<span class="tok-cm">/*</span>
<span class="tok-cm">  Modifie la chaine de caractère str pour remplacer chaque</span>
<span class="tok-cm">  caractère par leur équivalent en majuscule.</span>
<span class="tok-cm">*/</span>
<span class="tok-kt">void</span> <span class="tok-nf">str_toupper</span><span class="tok-p">(</span><span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-n">str</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">size</span> <span class="tok-o">=</span> <span class="tok-n">strlen</span><span class="tok-p">(</span><span class="tok-n">str</span><span class="tok-p">);</span>
    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <span class="tok-n">i</span> <span class="tok-o">&lt;</span> <span class="tok-n">size</span><span class="tok-p">;</span> <span class="tok-n">i</span><span class="tok-o">++</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-n">str</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-n">toupper</span><span class="tok-p">(</span><span class="tok-n">str</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]);</span>
    <span class="tok-p">}</span>
<span class="tok-p">}</span>

<span class="tok-cm">/*</span>
<span class="tok-cm">  Crée une copie de la chaine de caractère str</span>
<span class="tok-cm">  pour y remplacer chaque caractère par son</span>
<span class="tok-cm">  équivalent en minuscule.</span>
<span class="tok-cm">  Enfin cette copie est renvoyée, il est donc à charge</span>
<span class="tok-cm">  de la fonction appelante de libérer la mémoire à l&#39;aide</span>
<span class="tok-cm">  de la fonction free().</span>
<span class="tok-cm">*/</span>
<span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-nf">str_tolower</span><span class="tok-p">(</span><span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-n">str</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">size</span> <span class="tok-o">=</span> <span class="tok-n">strlen</span><span class="tok-p">(</span><span class="tok-n">str</span><span class="tok-p">);</span>
    <span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-n">lower_str</span> <span class="tok-o">=</span> <span class="tok-n">malloc</span><span class="tok-p">(</span><span class="tok-n">size</span> <span class="tok-o">*</span> <span class="tok-k">sizeof</span><span class="tok-p">(</span><span class="tok-kt">char</span><span class="tok-p">));</span>
    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <span class="tok-n">i</span> <span class="tok-o">&lt;</span> <span class="tok-n">size</span><span class="tok-p">;</span> <span class="tok-n">i</span><span class="tok-o">++</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-n">lower_str</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-n">tolower</span><span class="tok-p">(</span><span class="tok-n">str</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]);</span>
    <span class="tok-p">}</span>
    <span class="tok-n">lower_str</span><span class="tok-p">[</span><span class="tok-n">size</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-sc">&#39;\0&#39;</span><span class="tok-p">;</span>

    <span class="tok-k">return</span> <span class="tok-n">lower_str</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-kt">char</span> <span class="tok-o">**</span><span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-c1">// attention, ici nous utilisons char[] s1 = et non pas pas char* s1 =</span>
    <span class="tok-c1">// autrement s1 pointera sur de la mémoire non modifiable</span>
    <span class="tok-kt">char</span> <span class="tok-n">s1</span><span class="tok-p">[]</span> <span class="tok-o">=</span> <span class="tok-s">&quot;bonjour&quot;</span><span class="tok-p">;</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;s1: %s</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">s1</span><span class="tok-p">);</span>
    <span class="tok-n">str_toupper</span><span class="tok-p">(</span><span class="tok-n">s1</span><span class="tok-p">);</span>
    <span class="tok-c1">// ici on voit bien que la variable s1 a été modifiée directement</span>
    <span class="tok-c1">// on a donc perdu sa valeur originale</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;s1: %s</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">s1</span><span class="tok-p">);</span>

    <span class="tok-c1">// ici on voit que la variable s2 est une copie en minuscule de s1</span>
    <span class="tok-c1">// mais que s1 n&#39;a pas été modifiée et reste entièrement en majuscules.</span>
    <span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-n">s2</span> <span class="tok-o">=</span> <span class="tok-n">str_tolower</span><span class="tok-p">(</span><span class="tok-n">s1</span><span class="tok-p">);</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;s1: %s</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">s1</span><span class="tok-p">);</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;s2: %s</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">s2</span><span class="tok-p">);</span>
    <span class="tok-c1">// comme indiqué dans le commentaire de la fonction str_tolower</span>
    <span class="tok-c1">// il ne faut pas oublier de rendre la mémoire qui a été utilisé</span>
    <span class="tok-c1">// lorsqu&#39;on n&#39;en a plus besoin.</span>
    <span class="tok-n">free</span><span class="tok-p">(</span><span class="tok-n">s2</span><span class="tok-p">);</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Quels sont les avantages de l&#8217;une et de l&#8217;autre ?</p>
</div>
<div class="paragraph">
<p>Vous remarquez aussi l&#8217;utilisation de <code>malloc</code>, nous allons y revenir plus en détail dans la prochaine partie.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_pointeurs">11. Pointeurs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Comme on l&#8217;a déjà aperçu, la fonction <code>malloc</code> permet d&#8217;allouer une portion de mémoire pour y stocker des données. Ces zones mémoires dynamiques sont accessibles en lecture et écriture à l&#8217;aide de variables qu&#8217;on appelle pointeurs, car elle pointent vers des zones mémoires.</p>
</div>
<div class="paragraph">
<p>Les pointeurs sont omniprésents dans le langage C, on en a déjà utilisé sans vraiment s&#8217;en rendre compte, et ils sont très important à la compréhension du langage. Vous n&#8217;irez pas bien loin sans eux, il est donc important de les comprendre et de démystifier tout ça :)</p>
</div>
<div class="sect2">
<h3 id="_adresses">11.1. Adresses</h3>
<div class="paragraph">
<p>Toute variable a une adresse dans la RAM de l&#8217;ordinateur, même une variable simple comme un entier ou même un simple caractère.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-kt">int</span> <span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">42</span><span class="tok-p">;</span>
<span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;i = %d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">i</span><span class="tok-p">);</span>         <span class="tok-c1">// i = 42</span>
<span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;&amp;i = %p</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-o">&amp;</span><span class="tok-n">i</span><span class="tok-p">);</span>       <span class="tok-c1">// &amp;i = 0x7fff525836b8</span>
<span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;*(&amp;i) = %d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-o">*</span><span class="tok-p">(</span><span class="tok-o">&amp;</span><span class="tok-n">i</span><span class="tok-p">));</span> <span class="tok-c1">// *(&amp;i) = 42</span>

<span class="tok-kt">char</span> <span class="tok-n">c</span> <span class="tok-o">=</span> <span class="tok-sc">&#39;a&#39;</span><span class="tok-p">;</span>
<span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;c = %c</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">c</span><span class="tok-p">);</span>         <span class="tok-c1">// c = a</span>
<span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;&amp;c = %p</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-o">&amp;</span><span class="tok-n">c</span><span class="tok-p">);</span>       <span class="tok-c1">// &amp;c = 0x7fff525836b7</span>
<span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;*(&amp;c) = %c</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-o">*</span><span class="tok-p">(</span><span class="tok-o">&amp;</span><span class="tok-n">c</span><span class="tok-p">));</span> <span class="tok-c1">// *(&amp;c) = a</span>

<span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-n">pc</span> <span class="tok-o">=</span> <span class="tok-o">&amp;</span><span class="tok-n">c</span><span class="tok-p">;</span>                 <span class="tok-c1">// variable de type pointeur vers caractère</span>
<span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;pc = %c</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-o">*</span><span class="tok-n">pc</span><span class="tok-p">);</span>      <span class="tok-c1">// on accède a la valeur pointée en utilisant *</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Voici un petit diagramme de ce qu&#8217;il se passe au niveau mémoire, ici on retrouve les variable <code>i</code>, <code>c</code> et <code>pc</code>. Pour des raisons de compréhensions on présente également <code>*pc</code> même si ce n&#8217;est pas une variable à proprement parler, mais un dé-réferencement.</p>
</div>
<div class="paragraph">
<p>Vous pouvez aussi remarquer que la variable <code>pc</code> a sa propre adresse et est une variable à part entière.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./img/01-pointer.png" alt="01 pointer">
</div>
</div>
<div class="paragraph">
<p>Le langage C permet de récupérer l&#8217;adresse d&#8217;une variable en mémoire à l&#8217;aide du symbole esperluette <code>&amp;</code>. Comme on peut le voir au dessus, la variable <code>c</code> de type caractère représente le caractère <code>a</code>, mais en utilisant <code>&amp;c</code> on peut se rendre compte que lorsque j&#8217;ai lancé ce programme sur ma machine c&#8217;est à l&#8217;adresse hexadécimale <code>0x7fff525836b7</code> que sa valeur <code>a</code> a été stockée dans la RAM. Cette zone mémoire est en quelque sorte déterminée par l&#8217;OS de votre ordinateur.</p>
</div>
<div class="paragraph">
<p>Puisqu&#8217;un pointeur contient l&#8217;adresse mémoire d&#8217;une valeur, il nous faut un méchanisme qui nous permet de récupérer cette valeur. C&#8217;est avec le symbole <code>*</code> que l&#8217;ont peut faire ceci. C&#8217;est ainsi que ces expressions sont équivalentes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-kt">char</span> <span class="tok-n">c</span> <span class="tok-o">=</span> <span class="tok-sc">&#39;a&#39;</span><span class="tok-p">;</span>
<span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-n">pc</span> <span class="tok-o">=</span> <span class="tok-o">&amp;</span><span class="tok-n">c</span><span class="tok-p">;</span>

<span class="tok-n">pc</span> <span class="tok-o">==</span> <span class="tok-o">&amp;</span><span class="tok-n">c</span><span class="tok-p">;</span>
<span class="tok-o">*</span><span class="tok-n">pc</span> <span class="tok-o">==</span> <span class="tok-o">*</span><span class="tok-p">(</span><span class="tok-o">&amp;</span><span class="tok-n">c</span><span class="tok-p">)</span> <span class="tok-o">==</span> <span class="tok-n">c</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>On l&#8217;a vu juste un peu plus tôt lors de l&#8217;écriture de la fonction <code>str_toupper</code> qui modifie directement la chaine de caractère qu&#8217;on lui passe en paramètre. C&#8217;est ce même fonctionnement qui est à l&#8217;oeuvre ici. Ce n&#8217;est pas un méchanisme utilisé uniquement pour les chaines de caractère. Dès lors que vous avez l&#8217;adresse d&#8217;une variable, ou un pointeur qui pointe vers cette adresse mémoire, vous pouvez la lire, ou la modifier.</p>
</div>
<div class="paragraph">
<p>Par exemple, créons une fonction qui multiplie par 2 l&#8217;entier passé en paramètres :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-kt">void</span> <span class="tok-nf">pow2</span><span class="tok-p">(</span><span class="tok-kt">int</span><span class="tok-o">*</span> <span class="tok-n">a</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-o">*</span><span class="tok-n">a</span> <span class="tok-o">=</span> <span class="tok-o">*</span><span class="tok-n">a</span> <span class="tok-o">*</span> <span class="tok-mi">2</span><span class="tok-p">;</span> <span class="tok-c1">// ou encore *a *= 2;</span>
<span class="tok-p">}</span>

<span class="tok-kt">int</span> <span class="tok-n">x</span> <span class="tok-o">=</span> <span class="tok-mi">5</span><span class="tok-p">;</span>
<span class="tok-n">multiply2</span><span class="tok-p">(</span><span class="tok-o">&amp;</span><span class="tok-n">x</span><span class="tok-p">);</span>
<span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;x vaut : %d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">x</span><span class="tok-p">);</span>  <span class="tok-c1">// 10  (5 x 2)</span>

<span class="tok-kt">int</span> <span class="tok-o">*</span><span class="tok-n">px</span> <span class="tok-o">=</span> <span class="tok-o">&amp;</span><span class="tok-n">x</span><span class="tok-p">;</span>
<span class="tok-n">multiply2</span><span class="tok-p">(</span><span class="tok-n">px</span><span class="tok-p">);</span>
<span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;x vaut : %d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">x</span><span class="tok-p">);</span>  <span class="tok-c1">// 20  (10 x 2)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Avec ce nouveau savoir en poche, pouvez-vous expliquer cette façon d&#8217;implémenter la fonction <code>strlen</code> ?</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-kt">int</span> <span class="tok-nf">strlen</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-n">str</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-k">const</span> <span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-n">s</span> <span class="tok-o">=</span> <span class="tok-n">str</span><span class="tok-p">;</span>
    <span class="tok-k">while</span> <span class="tok-p">(</span><span class="tok-o">*</span><span class="tok-n">s</span><span class="tok-p">)</span>
        <span class="tok-n">s</span><span class="tok-o">++</span><span class="tok-p">;</span>
    <span class="tok-k">return</span> <span class="tok-n">s</span> <span class="tok-o">-</span> <span class="tok-n">str</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_entrées">12. Entrées</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_à_l_aide_de_code_stdio_h_code">12.1. à l&#8217;aide de <code>&lt;stdio.h&gt;</code></h3>
<div class="sect3">
<h4 id="_ouverture_d_un_fichier">12.1.1. Ouverture d&#8217;un fichier</h4>
<div class="ulist">
<ul>
<li>
<p><code>FILE* fopen(char* file, char* mode)</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>La fonction <code>fopen</code> permet d&#8217;ouvrir un fichier selon un mode spécifique:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>r</strong> ouvre le fichier en lecture, le pointeur de flux est placé au début du fichier ;</p>
</li>
<li>
<p><strong>r+</strong> ouvre le fichier en lecture et écriture. Le pointeur de flux est placé au début du fichier ;</p>
</li>
<li>
<p><strong>w</strong> tronque le fichier à son début ou ouvre le fichier en écriture. Le pointeur de flux est placé au début du fichier ;</p>
</li>
<li>
<p><strong>w+</strong> ouvre le fichier en lecture et écriture. Le fichier est également créé s&#8217;il n&#8217;existait pas auparavant. Si le fichier n&#8217;existait pas alors sa longueur est ramené à 0. Le pointeur de flux est placé au début du fichier ;</p>
</li>
<li>
<p><strong>a</strong> ouvre le fichier en mode ajout (écriture en fin de fichier, mode <strong>append</strong>). Le fichier est également créé s&#8217;il n&#8217;existait pas auparavant. Le pointeur de flux est placé à la fin du fichier ;</p>
</li>
<li>
<p><strong>a+</strong> ouvre le fichier en lecture et ajout (écriture en fin de fichier). Le fichier est également créé si il n&#8217;existait pas. La tête de lecture initiale du fichier est placée au début du fichier, mais l&#8217;écriture se fait en fin de fichier;</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_lecture_d_un_caractère">12.1.2. Lecture d&#8217;un caractère</h4>
<div class="ulist">
<ul>
<li>
<p><code>int getc(FILE *stream)</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Retourne le prochain caractère (si présent) dans un flux d&#8217;entrée (par exemple un fichier ou encore <code>stdin</code>).</p>
</div>
<div class="paragraph">
<p>Le caractère lu est retourné sous forme d&#8217;un <code>unsigned char</code> converti en <code>int</code>. Si le flux est fermé ou a atteint la fin alors cette methode retourne <code>EOF</code> (c&#8217;est à dire <code>-1</code>). La valeur <code>EOF</code> étant un entier valide (<code>int</code>) il faut alors utiliser les fonctions <code>feof()</code> et <code>ferror()</code> afin de déterminer entre la fin de lecture du flux ou un erreur lors de la lecture.</p>
</div>
<div class="paragraph">
<p>En cas d&#8217;erreur la variable globale nommée <code>errno</code> est alors remplie afin d&#8217;indiquer l&#8217;erreur qui a eu lieue (cette variable est accessible en incluant la bibliothèque <code>&lt;errno.h&gt;</code>.</p>
</div>
<div class="paragraph">
<p>Afin de déterminer le message d&#8217;erreur associé à la valeur de la variable globale <code>errno</code> on pourra utiliser la fonction <code>char* strerror(int code)</code> de la bibliothèque <code>&lt;string.h&gt;</code>.</p>
</div>
<div class="paragraph">
<p>Exemple de lecture d&#8217;un fichier:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sh"><span></span>$ <span class="tok-nb">echo</span> Hello &gt; hello.txt
$ gcc hello.c -o hello.exe <span class="tok-o">&amp;&amp;</span> ./hello.exe
&gt; H <span class="tok-o">(</span><span class="tok-m">72</span><span class="tok-o">)</span>
&gt; e <span class="tok-o">(</span><span class="tok-m">101</span><span class="tok-o">)</span>
&gt; l <span class="tok-o">(</span><span class="tok-m">108</span><span class="tok-o">)</span>
&gt; l <span class="tok-o">(</span><span class="tok-m">108</span><span class="tok-o">)</span>
&gt; o <span class="tok-o">(</span><span class="tok-m">111</span><span class="tok-o">)</span>
$</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>hello.c</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;string.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;errno.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-kt">char</span> <span class="tok-o">**</span><span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">FILE</span> <span class="tok-o">*</span><span class="tok-n">hello</span> <span class="tok-o">=</span> <span class="tok-n">fopen</span><span class="tok-p">(</span><span class="tok-s">&quot;hello.txt&quot;</span><span class="tok-p">,</span> <span class="tok-s">&quot;r&quot;</span><span class="tok-p">);</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">hello</span> <span class="tok-o">==</span> <span class="tok-nb">NULL</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Erreur: %s</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">strerror</span><span class="tok-p">(</span><span class="tok-n">errno</span><span class="tok-p">));</span>
        <span class="tok-k">return</span> <span class="tok-mi">1</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>

    <span class="tok-kt">int</span> <span class="tok-n">c</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-k">while</span> <span class="tok-p">((</span><span class="tok-n">c</span> <span class="tok-o">=</span> <span class="tok-n">fgetc</span><span class="tok-p">(</span><span class="tok-n">hello</span><span class="tok-p">))</span> <span class="tok-o">!=</span> <span class="tok-n">EOF</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;&gt; %c (%d)</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">c</span><span class="tok-p">,</span> <span class="tok-n">c</span><span class="tok-p">);</span>
    <span class="tok-p">}</span>

    <span class="tok-n">fclose</span><span class="tok-p">(</span><span class="tok-n">hello</span><span class="tok-p">);</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_lecture_depuis_l_entrée_standard">12.1.3. Lecture depuis l&#8217;entrée standard</h4>
<div class="ulist">
<ul>
<li>
<p><code>int getchar(void)</code></p>
</li>
<li>
<p><code>char* gets(char *)</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Exactement la même chose que <code>getch(stdin)</code>. La fonction <code>getc</code> permet de lire un caractère dans un flux d&#8217;entrée comme expliqué plus haut. La fonction <code>getchar</code> fait exactement la même chose mais en forçant la lecture depuis <code>stdin</code> (donc un terminal et non un fichier).</p>
</div>
<div class="paragraph">
<p>Exemple de lecture depuis l&#8217;entrée standard:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sh"><span></span>$ gcc hello.c -o hello.exe
$ <span class="tok-nb">echo</span> Hello <span class="tok-p">|</span> ./hello.exe
&gt; H <span class="tok-o">(</span><span class="tok-m">72</span><span class="tok-o">)</span>
&gt; e <span class="tok-o">(</span><span class="tok-m">101</span><span class="tok-o">)</span>
&gt; l <span class="tok-o">(</span><span class="tok-m">108</span><span class="tok-o">)</span>
&gt; l <span class="tok-o">(</span><span class="tok-m">108</span><span class="tok-o">)</span>
&gt; o <span class="tok-o">(</span><span class="tok-m">111</span><span class="tok-o">)</span>
$</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>hello.c</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-kt">char</span> <span class="tok-o">**</span><span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">c</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-k">while</span> <span class="tok-p">((</span><span class="tok-n">c</span> <span class="tok-o">=</span> <span class="tok-n">getchar</span><span class="tok-p">())</span> <span class="tok-o">!=</span> <span class="tok-n">EOF</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;&gt; %c (%d)</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">c</span><span class="tok-p">,</span> <span class="tok-n">c</span><span class="tok-p">);</span>
    <span class="tok-p">}</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Ici on remarque que le fait de prendre le flux d&#8217;entrée sortie évite d&#8217;avoir à ouvrir un fichier, s&#8217;assurer qu&#8217;il s&#8217;est ouvert sans problème et également de devoir le fermer avant la fin de programme.</p>
</div>
<div class="paragraph">
<p>La fonction <code>gets</code> essaye de lire autant de caractères possibles jusqu&#8217;à un caractère de saut de ligne depuis l&#8217;entrée standard (<code>stdin</code>). Ce caractère de saut de ligne n&#8217;est pas présent dans la chaine de caractère retournée par <code>gets</code>.</p>
</div>
<div class="paragraph">
<p>Il est fortement déconseillé d&#8217;utiliser la fonction <code>gets</code>, car elle n&#8217;est pas utilisable de façon sécurisée et il est souvent très difficile voir impossible de déterminer à l&#8217;avance la taille de la chaine de caractère qui sera lue. Ceci provoque des problèmes de sécurité permettant à un utilisateur malicieux d&#8217;exploiter une faille de type <code>buffer overflow</code>.</p>
</div>
<div class="paragraph">
<p>Il est donc très conseillé d&#8217;utiliser la fonction <code>fgets</code> (voir plus bas).</p>
</div>
</div>
<div class="sect3">
<h4 id="_lecture_depuis_un_flux_d_entrée">12.1.4. Lecture depuis un flux d&#8217;entrée</h4>
<div class="ulist">
<ul>
<li>
<p><code>char fgetc(FILE *stream)</code></p>
</li>
<li>
<p><code>char* fgets(char <strong>readContent, int maxSize, FILE</strong> stream)</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Les fonctions <code>fgetc</code> et <code>getc</code> sont sensiblement les mêmes, et ont le même paramètre d&#8217;entrée et de sortie. Les seules différences entre <code>getc</code> et <code>fgetc</code> sont que <code>getc</code> peut être implémenté sous forme de macro C alors qu&#8217;il est assuré que <code>fgetc</code> est une réelle fonction, ce qui implique:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>L&#8217;argument passé en paramètre à <code>getc</code> doit être une expression sans effet de bord ;</p>
</li>
<li>
<p>Comme <code>fgetc</code> est une fonction il est possible de récupérer son adresse et la passer en paramètre à d&#8217;autres fonctions poir une exécution plus tard ;</p>
</li>
<li>
<p>L&#8217;appel à <code>fgetc</code> peut être moins efficiente car appeler une fonction est plus couteux en temps machine (mais négligeable) que du code déjà <code>inline</code> par une macro.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>La fonction <code>fgets</code> est le complément à la fonction <code>gets</code> comme <code>fgetc</code> l&#8217;est à <code>getc</code>. Elle prends donc les mêmes paramètres d&#8217;entrée et renvoie la même chose que la fonction <code>gets</code>.</p>
</div>
<div class="paragraph">
<p>Exemple de lecture de fichiers.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sh"><span></span>$ <span class="tok-nb">echo</span> Hello &gt; hello.txt
$ gcc hello.c -o hello.exe <span class="tok-o">&amp;&amp;</span> ./hello.exe
&gt; Hello
&gt; taille: <span class="tok-m">6</span>
$ <span class="tok-nb">echo</span> <span class="tok-s2">&quot;Hello\neverybody&quot;</span> &gt; hello.txt
$ gcc hello.c -o hello.exe <span class="tok-o">&amp;&amp;</span> ./hello.exe
&gt; Hello
&gt; taille: <span class="tok-m">6</span>
$ gcc hello-full.c -o hello.exe <span class="tok-o">&amp;&amp;</span> ./hello.exe
&gt; Hello
&gt; taille: <span class="tok-m">6</span>
&gt; everybody
&gt; taille: <span class="tok-m">10</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>hello.c</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;string.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;errno.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-kt">char</span> <span class="tok-o">**</span><span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">FILE</span> <span class="tok-o">*</span><span class="tok-n">hello</span> <span class="tok-o">=</span> <span class="tok-n">fopen</span><span class="tok-p">(</span><span class="tok-s">&quot;hello.txt&quot;</span><span class="tok-p">,</span> <span class="tok-s">&quot;r&quot;</span><span class="tok-p">);</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">hello</span> <span class="tok-o">==</span> <span class="tok-nb">NULL</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Erreur: %s</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">strerror</span><span class="tok-p">(</span><span class="tok-n">errno</span><span class="tok-p">));</span>
        <span class="tok-k">return</span> <span class="tok-mi">1</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>

    <span class="tok-kt">char</span> <span class="tok-n">content</span><span class="tok-p">[</span><span class="tok-mi">100</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-s">&quot;&quot;</span><span class="tok-p">;</span>
    <span class="tok-n">fgets</span><span class="tok-p">(</span><span class="tok-n">content</span><span class="tok-p">,</span> <span class="tok-mi">100</span><span class="tok-p">,</span> <span class="tok-n">hello</span><span class="tok-p">);</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;&gt; %s&quot;</span><span class="tok-p">,</span> <span class="tok-n">content</span><span class="tok-p">);</span>
    <span class="tok-kt">int</span> <span class="tok-n">contentSize</span> <span class="tok-o">=</span> <span class="tok-n">strlen</span><span class="tok-p">(</span><span class="tok-n">content</span><span class="tok-p">);</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;&gt; taille: %d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">contentSize</span><span class="tok-p">);</span>

    <span class="tok-n">fclose</span><span class="tok-p">(</span><span class="tok-n">hello</span><span class="tok-p">);</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>L&#8217;exemple suivant montre comment récupérer successivement toutes les lignes d&#8217;un fichier, puisque <code>fgets</code> s&#8217;arrête à la lecture d&#8217;un caractère de type saut de ligne (<code>\n</code>):</p>
</div>
<div class="paragraph">
<p><strong>hello-full.c</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;string.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;errno.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-kt">char</span> <span class="tok-o">**</span><span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">FILE</span> <span class="tok-o">*</span><span class="tok-n">hello</span> <span class="tok-o">=</span> <span class="tok-n">fopen</span><span class="tok-p">(</span><span class="tok-s">&quot;hello.txt&quot;</span><span class="tok-p">,</span> <span class="tok-s">&quot;r&quot;</span><span class="tok-p">);</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">hello</span> <span class="tok-o">==</span> <span class="tok-nb">NULL</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Erreur: %s</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">strerror</span><span class="tok-p">(</span><span class="tok-n">errno</span><span class="tok-p">));</span>
        <span class="tok-k">return</span> <span class="tok-mi">1</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>

    <span class="tok-kt">char</span> <span class="tok-n">content</span><span class="tok-p">[</span><span class="tok-mi">100</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-s">&quot;&quot;</span><span class="tok-p">;</span>
    <span class="tok-k">while</span> <span class="tok-p">(</span><span class="tok-n">fgets</span><span class="tok-p">(</span><span class="tok-n">content</span><span class="tok-p">,</span> <span class="tok-mi">100</span><span class="tok-p">,</span> <span class="tok-n">hello</span><span class="tok-p">)</span> <span class="tok-o">!=</span> <span class="tok-nb">NULL</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;&gt; %s&quot;</span><span class="tok-p">,</span> <span class="tok-n">content</span><span class="tok-p">);</span>
        <span class="tok-kt">int</span> <span class="tok-n">contentSize</span> <span class="tok-o">=</span> <span class="tok-n">strlen</span><span class="tok-p">(</span><span class="tok-n">content</span><span class="tok-p">);</span>
        <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;&gt; taille: %d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">contentSize</span><span class="tok-p">);</span>
    <span class="tok-p">}</span>

    <span class="tok-n">fclose</span><span class="tok-p">(</span><span class="tok-n">hello</span><span class="tok-p">);</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>On notera l&#8217;utilisation du test de retour de la fonction <code>fgets</code> qui renvoie <code>NULL</code> lorsqu&#8217;on a atteint la fin de fichier, nous permettant d&#8217;arrêter notre boucle <code>while</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_à_l_aide_de_gnu_readline">12.2. à l&#8217;aide de GNU Readline</h3>
<div class="paragraph">
<p>GNU Readline est une bibliothèque qui permet au developpeur de proposer des interfaces en ligne de commande avec des fonctionalités telles que l&#8217;auto complétion, l&#8217;édition de la ligne en train d&#8217;être tappée, ou d&#8217;une gestion de l&#8217;historique. C&#8217;est une logiciel libre maintenu par le projet GNU.</p>
</div>
<div class="paragraph">
<p>Elle peut donc être très utile et vous faire gagner du temps et éviter tout un tas de soucis ;-).</p>
</div>
<div class="sect3">
<h4 id="_lecture_d_une_ligne">12.2.1. Lecture d&#8217;une ligne</h4>
<div class="ulist">
<ul>
<li>
<p><code>char* readline(char* prompt)</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>La fonction de base de readline permet de proposer un prompt à l&#8217;utilisateur et de récupérer sa saisie.</p>
</div>
<div class="paragraph">
<p>Example de demande de saisie à l&#8217;aide de <code>readline</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sh"><span></span>$ gcc hello.c -o hello.exe -lreadline
$ ./hello.exe
Quel est votre prénom ?
&gt; Alexandre
Vous avez saisi: Alexandre</code></pre>
</div>
</div>
<div class="paragraph">
<p>Vous noterez l&#8217;utilisation du paramètre <code>-lreadline</code> au compilateur <code>gcc</code> qui lui demande d&#8217;utiliser la librairie (<code>-l</code>) <code>readline</code> lors de la compilation pour y trouver l&#8217;implémentation de la fonction <code>readline</code> telle que décrit dans le fichier d&#8217;en-tête <code>&lt;readline/readline.h&gt;</code>.</p>
</div>
<div class="paragraph">
<p><strong>hello.c</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdlib.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;readline/readline.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-kt">char</span> <span class="tok-o">**</span><span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-n">name</span> <span class="tok-o">=</span> <span class="tok-n">readline</span><span class="tok-p">(</span><span class="tok-s">&quot;Quel est votre prénom ?</span><span class="tok-se">\n</span><span class="tok-s">&gt; &quot;</span><span class="tok-p">);</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Vous avez saisi: %s</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">name</span><span class="tok-p">);</span>
    <span class="tok-n">free</span><span class="tok-p">(</span><span class="tok-n">name</span><span class="tok-p">);</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Lors de l&#8217;exécution du programme, il se met en pause après avoir imprimé `&gt; ` et attends que l&#8217;utilisateur saisisse quelque chose puis appuye sur la touche entrée pour valider.</p>
</div>
<div class="paragraph">
<p>Il est à noter que la chaine de charactère est allouée par la fonction <code>readline</code> et que sa zone mémoire doit être libérée lorsqu&#8217;on n&#8217;en a plus besoin à l&#8217;aide de la méthode <code>free()</code> qui se trouve dans la bibliothèque <code>&lt;stdlib.h&gt;</code>.</p>
</div>
<div class="paragraph">
<p>Par défaut vous remarquez également que l&#8217;utilisateur peut auto-compléter le noms des fichiers qui se trouvent dans le répertoire d&#8217;où l&#8217;on a lancé notre programme.</p>
</div>
<div class="paragraph">
<p>C&#8217;est une des fonctionnalités offertes par la bibliothèque readline. Vous en trouverez de nombreuses en vous rendant sur la documentation en ligne àl 'adresse suivante: [<a href="http://web.mit.edu/gnu/doc/html/rlman_2.html" class="bare">http://web.mit.edu/gnu/doc/html/rlman_2.html</a>](<a href="http://web.mit.edu/gnu/doc/html/rlman_2.html" class="bare">http://web.mit.edu/gnu/doc/html/rlman_2.html</a>), à l&#8217;aide de <code>man readline</code> ou bien encore évidemment de Google ;)</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sorties">13. Sorties</h2>
<div class="sectionbody">
<div class="sect3">
<h4 id="_ecriture_d_un_caractère_dans_un_flux">13.1. Ecriture d&#8217;un caractère dans un flux</h4>
<div class="ulist">
<ul>
<li>
<p><code>int putc(int c, FILE *stream)</code></p>
</li>
<li>
<p><code>int fputs(char* s, FILE* stream)</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>La fonction <code>putc</code> permet d&#8217;écrire un charactère (converti en <code>unsigned char</code>) dans un flux de sortie.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sh"><span></span>$ gcc hello.c -o hello.exe <span class="tok-o">&amp;&amp;</span> ./hello.exe
$ cat hello.txt
abc
$</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>hello.c</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;string.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;errno.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-kt">char</span> <span class="tok-o">**</span><span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">FILE</span> <span class="tok-o">*</span><span class="tok-n">hello</span> <span class="tok-o">=</span> <span class="tok-n">fopen</span><span class="tok-p">(</span><span class="tok-s">&quot;hello.txt&quot;</span><span class="tok-p">,</span> <span class="tok-s">&quot;w&quot;</span><span class="tok-p">);</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">hello</span> <span class="tok-o">==</span> <span class="tok-nb">NULL</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;errno:</span><span class="tok-se">\n\t</span><span class="tok-s">code: %d</span><span class="tok-se">\n\t</span><span class="tok-s">message: %s</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span>
               <span class="tok-n">errno</span><span class="tok-p">,</span> <span class="tok-n">strerror</span><span class="tok-p">(</span><span class="tok-n">errno</span><span class="tok-p">));</span>
        <span class="tok-k">return</span> <span class="tok-mi">1</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>

    <span class="tok-n">putc</span><span class="tok-p">(</span><span class="tok-sc">&#39;a&#39;</span><span class="tok-p">,</span> <span class="tok-n">hello</span><span class="tok-p">);</span>
    <span class="tok-n">putc</span><span class="tok-p">(</span><span class="tok-sc">&#39;b&#39;</span><span class="tok-p">,</span> <span class="tok-n">hello</span><span class="tok-p">);</span>
    <span class="tok-n">putc</span><span class="tok-p">(</span><span class="tok-sc">&#39;c&#39;</span><span class="tok-p">,</span> <span class="tok-n">hello</span><span class="tok-p">);</span>
    <span class="tok-n">putc</span><span class="tok-p">(</span><span class="tok-sc">&#39;\n&#39;</span><span class="tok-p">,</span> <span class="tok-n">hello</span><span class="tok-p">);</span>

    <span class="tok-n">fclose</span><span class="tok-p">(</span><span class="tok-n">hello</span><span class="tok-p">);</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>La fonction <code>fputs</code> permet d&#8217;écrire une chaîne de caractère dans un flux de sortie.</p>
</div>
<div class="paragraph">
<p>Le résultat de la fonction <code>fputs`est un entier positif si tout s&#8217;est bien passé, et `EOF</code> en cas d&#8217;erreur d&#8217;écriture.</p>
</div>
<div class="paragraph">
<p>Exemple d&#8217;écriture d&#8217;une chaine de caractère sur la sortie standard:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sh"><span></span>$ gcc hello.c -o hello.exe <span class="tok-o">&amp;&amp;</span> ./hello.exe
$ cat hello.txt
Hello
$</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>hello.c</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;string.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;errno.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-kt">char</span> <span class="tok-o">**</span><span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">FILE</span> <span class="tok-o">*</span><span class="tok-n">hello</span> <span class="tok-o">=</span> <span class="tok-n">fopen</span><span class="tok-p">(</span><span class="tok-s">&quot;hello.txt&quot;</span><span class="tok-p">,</span> <span class="tok-s">&quot;w&quot;</span><span class="tok-p">);</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">hello</span> <span class="tok-o">==</span> <span class="tok-nb">NULL</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;errno:</span><span class="tok-se">\n\t</span><span class="tok-s">code: %d</span><span class="tok-se">\n\t</span><span class="tok-s">message: %s</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span>
               <span class="tok-n">errno</span><span class="tok-p">,</span> <span class="tok-n">strerror</span><span class="tok-p">(</span><span class="tok-n">errno</span><span class="tok-p">));</span>
        <span class="tok-k">return</span> <span class="tok-mi">1</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>

    <span class="tok-n">fputs</span><span class="tok-p">(</span><span class="tok-s">&quot;Hello</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">hello</span><span class="tok-p">);</span>

    <span class="tok-n">fclose</span><span class="tok-p">(</span><span class="tok-n">hello</span><span class="tok-p">);</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ecriture_dans_la_sortie_standard">13.2. Ecriture dans la sortie standard</h4>
<div class="ulist">
<ul>
<li>
<p><code>int putchar(int c)</code></p>
</li>
<li>
<p><code>int puts(char* s)</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>La fonction <code>putc</code> permet d&#8217;écrire un caractère dans un flux de sortie comme expliqué plus haut. La fonction <code>putchar</code> fait exactement la même chose mais en forçant l&#8217;écriture sur <code>stdout</code> (donc un terminal et non un fichier).</p>
</div>
<div class="paragraph">
<p>Exemple d&#8217;écriture sur la sortie standard:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sh"><span></span>$ gcc hello.c -o hello.exe
$ ./hello.exe
abc
$</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>hello.c</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-kt">char</span> <span class="tok-o">**</span><span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-n">putchar</span><span class="tok-p">(</span><span class="tok-sc">&#39;a&#39;</span><span class="tok-p">);</span>
    <span class="tok-n">putchar</span><span class="tok-p">(</span><span class="tok-sc">&#39;b&#39;</span><span class="tok-p">);</span>
    <span class="tok-n">putchar</span><span class="tok-p">(</span><span class="tok-sc">&#39;c&#39;</span><span class="tok-p">);</span>
    <span class="tok-n">putchar</span><span class="tok-p">(</span><span class="tok-sc">&#39;\n&#39;</span><span class="tok-p">);</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>La fonction <code>puts</code> permet d&#8217;écrire une chaîne de caractère dans la sortie standard (<code>stdout</code>).</p>
</div>
<div class="paragraph">
<p>Il est à noter que la fonction <code>puts</code> ajoutera automatiquement un caractère de saut de ligne à la suite de la chaine de caractère que vous voulez imprimer.</p>
</div>
<div class="paragraph">
<p>Exemple d&#8217;écriture d&#8217;une chaine de caractère sur la sortie standard:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sh"><span></span>$ gcc hello.c -o hello.exe
$ ./hello.exe
Hello
$</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>hello.c</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-kt">char</span> <span class="tok-o">**</span><span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-n">puts</span><span class="tok-p">(</span><span class="tok-s">&quot;Hello&quot;</span><span class="tok-p">);</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_alternatives_au_c">14. Alternatives au C</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Comme vous pouvez le constater, le C est un langage de bas niveau qui permet de gérer la mémoire nous même. Cela a ses avantages et aussi ses inconvénients. Pour des tâches simples comme la manipulation de chaines de caractères par exemple, ce n&#8217;est pas le langage le plus simple à utiliser.</p>
</div>
<div class="paragraph">
<p>Plusieurs langages ayant des performances similaires mais étant plus simples à utiliser, avec de nombreuses bibliothèques disponibles existent.</p>
</div>
<div class="sect2">
<h3 id="_google_go">14.1. Google Go</h3>
<div class="paragraph">
<p>Le langage Go, créé par Google est une bonne alternative au langage C. Go est un langage qui contient ce qu&#8217;on appelle un garbage collector, comme en Java, c&#8217;est à dire qu&#8217;il gère lui même la mémoire.</p>
</div>
<div class="paragraph">
<p>Il apporte de nombreux avantages comme:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>simplicité d&#8217;écriture</p>
</li>
<li>
<p>temps de compilation extrêment plus rapide (80% à 90% plus rapide que du C), ce qui le rends même utilisable pour du scripting</p>
</li>
<li>
<p>gestion du multi-threading en standard</p>
</li>
<li>
<p>nombreuses bibliothèques en standard</p>
<div class="ulist">
<ul>
<li>
<p>chaines de caractère</p>
</li>
<li>
<p>HTTP et Web</p>
</li>
<li>
<p>Cryptographie</p>
</li>
<li>
<p>&#8230;&#8203;</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_rust">14.2. Rust</h3>
<div class="paragraph">
<p>Le langage Rust, créé par Mozilla est un langage très récent, extrêmement performant, pouvant être plus compliqué à utiliser que le C car introduisant de nombreux autres concepts, reste pour des programmes simples une bonne alternative. Un langage plein de bonnes pratiques qu&#8217;il est très intéressant d&#8217;étudier.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
</div>
</div>
</body>
</html>